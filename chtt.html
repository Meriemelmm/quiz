<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .question-container {
            margin-bottom: 20px;
        }
        .question-container input, .question-container button {
            margin-top: 10px;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

<h1>HTML Quiz</h1>

<form id="quizForm">
    <!-- Les questions seront ajoutées dynamiquement ici -->
</form>

<button type="button" onclick="submitQuiz()">Submit Quiz</button>

<script>
// Structure des questions avec différents types (QCM, Vrai/Faux, Textuelles)
const questions = [
    {
        type: "multiple-choice", 
        question: "What does HTML stand for?",
        answers: [
            "HyperText Markup Language", 
            "HighText Machine Language", 
            "Hyperlink Text Markup Language", 
            "None of the above"
        ],
        correctAnswer: 0
    },
    {
        type: "true-false",
        question: "HTML is used to style web pages.",
        answers: ["True", "False"],
        correctAnswer: 1
    },
    {
        type: "textual",
        question: "What is the purpose of the <head> element in an HTML document?",
        correctAnswer: "It contains metadata like the document's title, links to stylesheets, and scripts."
    },
    {
        type: "multiple-choice",
        question: "Which tag is used for a line break in HTML?",
        answers: ["<break>", "<lb>", "<br>", "<line>"],
        correctAnswer: 2
    },
    {
        type: "true-false",
        question: "The <img> tag is used to insert images in HTML.",
        answers: ["True", "False"],
        correctAnswer: 0
    }
];

// Fonction pour afficher les questions
function displayQuestions() {
    const quizForm = document.getElementById('quizForm');
    questions.forEach((question, index) => {
        const div = document.createElement('div');
        div.classList.add('question-container');
        const questionElement = document.createElement('p');
        questionElement.innerHTML = (index + 1) + '. ' + question.question;
        div.appendChild(questionElement);

        if (question.type === 'multiple-choice') {
            question.answers.forEach((answer, i) => {
                const answerLabel = document.createElement('label');
                const answerInput = document.createElement('input');
                answerInput.type = 'radio';
                answerInput.name = 'question' + index;
                answerInput.value = i;
                answerLabel.appendChild(answerInput);
                answerLabel.appendChild(document.createTextNode(answer));
                div.appendChild(answerLabel);
                div.appendChild(document.createElement('br'));
            });
        } else if (question.type === 'true-false') {
            // Boutons Vrai / Faux
            const trueButton = document.createElement('button');
            trueButton.innerHTML = "True";
            trueButton.type = "button";
            trueButton.onclick = () => handleTrueFalseAnswer(index, true);
            div.appendChild(trueButton);

            const falseButton = document.createElement('button');
            falseButton.innerHTML = "False";
            falseButton.type = "button";
            falseButton.onclick = () => handleTrueFalseAnswer(index, false);
            div.appendChild(falseButton);
        } else if (question.type === 'textual') {
            const inputText = document.createElement('input');
            inputText.type = 'text';
            inputText.name = 'question' + index;
            div.appendChild(inputText);
        }

        quizForm.appendChild(div);
    });
}

// Fonction pour gérer les réponses des questions Vrai/Faux
function handleTrueFalseAnswer(questionIndex, answer) {
    const question = questions[questionIndex];
    const buttons = document.getElementsByName('question' + questionIndex);
    
    // Cacher les boutons après sélection de la réponse
    buttons.forEach(button => button.classList.add('hidden'));
    
    // Vérifier si la réponse est correcte
    checkAnswer(questionIndex, answer);
}

// Fonction pour vérifier les réponses des questions QCM et Textuelles
function checkAnswer(questionIndex, userAnswer) {
    const question = questions[questionIndex];
    const correctAnswer = question.correctAnswer;
    let isCorrect = false;

    if (question.type === 'multiple-choice') {
        isCorrect = correctAnswer === userAnswer;
    } else if (question.type === 'true-false') {
        isCorrect = correctAnswer === userAnswer;
    } else if (question.type === 'textual') {
        const userText = userAnswer.trim().toLowerCase();
        const correctText = question.correctAnswer.trim().toLowerCase();
        isCorrect = userText === correctText;
    }

    // Afficher si la réponse est correcte ou non
    alert(isCorrect ? 'Correct answer!' : 'Incorrect answer!');
}

// Fonction de soumission du quiz
function submitQuiz() {
    let score = 0;

    questions.forEach((question, index) => {
        const userAnswer = getUserAnswer(index);
        const isCorrect = checkAnswer(index, userAnswer);
        if (isCorrect) {
            score++;
        }
    });

    alert("Your score is: " + score + " out of " + questions.length);
}

// Fonction pour récupérer la réponse de l'utilisateur
function getUserAnswer(index) {
    const question = questions[index];
    let answer = "";

    if (question.type === "multiple-choice") {
        const radios = document.getElementsByName('question' + index);
        for (let i = 0; i < radios.length; i++) {
            if (radios[i].checked) {
                answer = radios[i].value;
                break;
            }
        }
    } else if (question.type === "true-false") {
        // La réponse a déjà été gérée par handleTrueFalseAnswer
    } else if (question.type === "textual") {
        const input = document.querySelector('input[name="question' + index + '"]');
        answer = input ? input.value : "";
    }

    return answer;
}

// Afficher les questions
displayQuestions();

</script>

</body>
</html>

