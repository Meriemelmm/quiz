const e="https://fastcomments.com",t="https://cdn.fastcomments.com";function n(t,o,i,s,a,r,c,d,l){const m=new XMLHttpRequest;d||t.isCrawler||(m.withCredentials=!0),void 0===l&&(l=2);const p=(t.apiHost?t.apiHost:e)+i;m.open(o,p),c||m.setRequestHeader("Accept","application/json"),"POST"!==o&&"PUT"!==o&&"DELETE"!==o||m.setRequestHeader("Content-type","application/json"),t.isCrawler||m.setRequestHeader("Original-Referrer",t.originalReferrer),s?m.send(JSON.stringify(s)):m.send(),m.onload=function(){const e=c?m.responseText:JSON.parse(m.responseText);200!==m.status&&401!==m.status&&422!==m.status&&429!==m.status?400!==m.status&&l>0&&"GET"===o?setTimeout((function(){l--,n(t,o,i,s,a,r,c,d,l)}),1500*Math.random()):r&&r(e):a&&a(e)},m.onerror=function(){r&&r(m)}}function o(e,t){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage&&window.ReactNativeWebView.postMessage(e),window.parent&&window.parent.postMessage&&window.parent.postMessage(e,t)}function i(e,t,n){o(JSON.stringify({type:"redirect",instanceId:e,url:t,isNewWindow:n}),"*")}function s(e,t){o(JSON.stringify({type:"update-comment-count",instanceId:e,count:t}),"*")}function a(e,t){window.parent.postMessage(JSON.stringify({type:"update-height",instanceId:e,height:t}),"*")}function r(e,t){o(JSON.stringify({type:"update-config",instanceId:e,config:t}),"*")}function c(e,t,n,i,s){o(JSON.stringify({type:"vote-success",instanceId:e,comment:t,voteId:n,direction:i,status:s}),"*")}function d(e,t,n){o(JSON.stringify({type:"on-authentication-change",instanceId:e,changeType:t,data:n}),"*")}function l(e,t){o(JSON.stringify({type:"on-comments-rendered",instanceId:e,comments:t}),"*")}function m(e,t,n,i){o(JSON.stringify({type:"open-profile",instanceId:e,userId:t,currentUser:n,comment:i}),"*")}function p(e,t,n,o){let i="";return e.disableToolbar||(i+='<div class="toolbar default-hidden" data-comment-id="'+o+'">',i+='<div class="t-btn icon bold" data-action="bold"></div>',i+='<div class="t-btn icon it" data-action="it"></div>',i+='<div class="t-btn icon ul" data-action="ul"></div>',i+='<div class="t-btn icon s" data-action="s"></div>',i+='<div class="t-btn icon code" data-action="code"></div>',i+='<div class="t-btn icon link" data-action="link" title="'+t.t90+'"></div>',e.noImageUploads||(i+='<div class="t-btn icon img-btn-wrap img-up" data-action="img-up"><input name="file" title="'+t.t25+'" type="file" accept="image/png, image/jpeg, image/gif, image/webp" class="file-input" data-parent-id="'+o+'"></div>',i+='<div class="t-btn icon gif txt" data-action="gif"></div>'),e.enableSpoilers&&(i+='<div class="t-btn spoiler icon txt" data-action="spoiler">'+t.t297+"</div>"),n.forEach((e=>{e.toolbarFilter&&(i=e.toolbarFilter(o,i))})),i+="</div>"),i}function u(e){return e.defaultAvatarSrc?e.defaultAvatarSrc:"/images/unknown-person-v2.png"}function g(e){return'<div class="fastcomments-message-wrapper"><div class="fastcomments-message"><d class="message-text">'+e+'</d><d class="icon bubble-white"></d></div></div>'}function f(e,t){let n="";return e.disableNotificationBell||(n+='<d class="notification-bell'+(t>0?" has-notifications":"")+'">',n+='<i class="icon bell"></i>',n+='<i class="icon bell-red"></i>',n+='<d class="count">'+(t<100?Number(t).toLocaleString():"99+")+"</d>",n+="</d>"),n}function b(e,t){let n="";return e.forEach((function(e){e.getNotificationListHTML&&(n+=e.getNotificationListHTML(t))})),n}const v={"username-taken":"t16","invalid-name":"t17","invalid-name-is-email":"t18"};function h(e,t,n,o,i,s,a,r,c,d,l,m,h,x,y,I,w){if(e.readonly||e.noNewRootComments&&!h)return"";const E=s[h];let S='<form class="comment-reply'+(a[h]?" show-default-hidden":"")+(h?"":" root")+'" data-parent-id="'+h+'"';if(n.forEach((e=>{e.getFormAttributesHTML&&(S+=e.getFormAttributesHTML("comment",o,h))})),S+=">",n.forEach((e=>{e.replyAreaTop&&(S+=e.replyAreaTop(o,E,!!a[h],h))})),null!==h){let e;const n=o?o.displayName?o.displayName:o.username:void 0;e=n?t.t158.replace("[to]",d[h].commenterName).replace("[from]",n):t.t12.replace("[to]",d[h].commenterName),S+='<div class="replying-to">'+e+"</div>"}e.headerHTML&&!h&&(S+=e.headerHTML);const k=e.sso||e.simpleSSO;if(o&&!o.isAnonSession||!k||e.allowAnon){if(null===h&&o&&o.authorized){S+='<div class="comment-reply-top-bar">',S+='<div class="logged-in-info">';const i='<img src="'+(o.avatarSrc||o.avatar||u(e))+'" alt="'+t.t51+'" class="'+(o.id&&!e.disableProfiles?"open-profile":"")+'"/>';S+='<span class="avatar">'+i+"</span>",S+='<span class="username">'+(o.displayName?o.displayName:o.username)+"</span>",S+="</div>",S+='<d class="right">';const s=!k||k&&(k.logoutURL||k.logoutCallback);(s||I)&&(S+='<div class="menu dropdown">',S+='<div class="drop-label"><i></i><i></i><i></i></div>',S+='<div class="items card goes-black">',s&&(S+='<div class="item log-out" data-parent-id="'+h+'">'+t.t21+"</div>"),I&&(S+=w?'<div class="item menu-reopen-thread">'+t.t255+"</div>":'<div class="item menu-close-thread">'+t.t254+"</div>"),S+="</div>",S+="</div>"),S+=f(e,y),S+="</d>",S+='<d class="notifications">',S+=b(n),S+="</d>",S+="</div>",r[h]&&(S+=' <span class="fc-red">'+t.t22+"</span>")}if(S+='<div class="comment-input'+(E?" animated-background":"")+'">',x||w)x?S+=g(t.t156):w&&(S+=g(t.t253));else{let n,o;e.enableWYSIWYG?(n='div contenteditable="true"',e.useSingleLineCommentInput&&(n+='enterkeyhint="send"'),o="></div>"):e.useSingleLineCommentInput?(n="input",o="/>"):(n="textarea",o="></textarea>"),S+="<"+n+' name="fastcomments-comment" autocomplete="off" class="comment-input" required id="input-for-parent-'+h+'" data-parent-id="'+h+'" data-restore-id="fcc-'+h+'" placeholder="'+t.t23+'" maxlength="'+(e.maxCommentCharacterLength?e.maxCommentCharacterLength:2e3)+'" onfocus="window.fcHandleCommentInputSelected(event)"'+o}let i;if(S+='<div class="horizontal-border-wrapper">',S+='<div class="horizontal-border horizontal-border-top-left"></div>',S+='<div class="horizontal-border horizontal-border-top-right"></div>',S+='<div class="horizontal-border horizontal-border-left"></div>',S+='<div class="horizontal-border horizontal-border-right"></div>',S+='<div class="horizontal-border horizontal-border-bottom-left"></div>',S+='<div class="horizontal-border horizontal-border-bottom-right"></div>',S+="</div>",S+="</div>",E&&!c[h]||(S+='<div class="reply-button-wrapper"><button type="submit" data-parent-id="'+h+'" class="fast-comments-reply">'+(x?t.t157:t.t24)+(null===h?'<i class="icon '+(x?"return":"bubble")+'"></i>':"")+"</button></div>"),S+=p(e,t,n,h),c[h]&&(i="","string"==typeof c[h]?i+='<div class="fc-red">'+c[h]+"</div>":"object"==typeof c[h]&&v[c[h].code]&&(i+='<div class="fc-red">'+t[v[c[h].code]]+"</div>")),o&&o.authorized)o&&(S+='<input name="fastcomments-email" type="hidden" value="'+o.email+'"  />',S+='<input name="fastcomments-username" type="hidden" value="'+o.username+'"  />',i&&(S+=i));else{if(S+='<div class="user-info-input auth-input default-hidden">',k&&!e.allowAnon)(k.loginURL||k.loginCallback)&&(S+='<a class="sso-login" '+(k.loginURL?'href="'+k.loginURL+'"':"")+">"+t.t59+"</a>");else{let n=!1;k&&(k.loginURL||k.loginCallback)?S+='<a class="sso-login" '+(k.loginURL?'href="'+k.loginURL+'"':"")+">"+t.t71+"</a>":n=!0,e.disableEmailInputs||(S+='<div class="reasoning">'+(e.allowAnon?t.t13:t.t14)+"</div>",n&&(S+='<div class="fc-login button">'+t.t71+"</div>"),S+='<input name="fastcomments-email" '+(e.allowAnon?"":"required")+' type="email" id="email-input-for-parent-'+h+'" data-restore-id="fce-'+h+'" placeholder="'+t.t15+'" maxlength="70" value="'+(e.prefillEmail?e.prefillEmail:"")+'" />'),S+='<input name="fastcomments-username" required type="text" id="username-input-for-parent-'+h+'" data-restore-id="fcu-'+h+'" placeholder="'+t.t19+'" maxlength="70" '+(e.defaultUsername?'value="'+e.defaultUsername+'"':"")+" />",e.enableCommenterLinks&&(S+='<input name="fastcomments-link" type="url" id="link-input-for-parent-'+h+'" data-restore-id="fcl-'+h+'" placeholder="'+t.t92+'" maxlength="500" />'),i&&(S+=i),e.disableEmailInputs||(S+='<div class="solicitation-info">'+t.t40+"</div>"),E&&!c[h]||(S+='<button type="submit" data-parent-id="'+h+'" class="fast-comments-reply">'+t.t99+"</button>")}S+="</div>"}0,h&&(S+='<div class="cancel-button-wrapper">',S+='<button type="button" data-parent-id="'+h+'" class="fast-comments-reply-cancel default-hidden" type="button" title="'+t.t26+'"><div class="icon cross"></div></button>',S+="</div>")}else k.loginURL||k.loginCallback?S+='<div class="sso-login-wrapper"><div class="sso-login clickable" '+(k.loginURL?'href="'+k.loginURL+'"':"")+'><div class="message-text">'+t.t59+'</div><d class="icon bubble-white"></d></div></div>':S+='<div class="sso-login-wrapper"><div class="sso-login"><div class="message-text">'+t.t60+'</div><d class="icon bubble-white"></d></div></div>';if(!0===c[h])S+=l;else if("object"==typeof c[h])if("banned"===c[h].code){let e=t.t57;c[h].bannedUntil&&(e+=" "+t.t119.replace("[endsText]",new Date(c[h].bannedUntil).toLocaleString())),S+='<div class="fc-red comment-error">'+e+"</div>"}else"user-rate-limited"===c[h].code?S+='<div class="fc-red comment-error">'+t.t98+"</div>":"closed"===c[h].code?S+='<div class="fc-red comment-error">'+t.t253+"</div>":"rate-limited"===c[h].code?S+='<div class="fc-red comment-error">'+t.t250+"</div>":"profile-comments-private"===c[h].code?S+='<div class="fc-red comment-error">'+t.t197+"</div>":"profile-dm-private"===c[h].code?S+='<div class="fc-red comment-error">'+t.t198+"</div>":"comment-too-big"===c[h].code?S+='<div class="fc-red comment-error">'+t.t245.replace("[count]",c[h].maxCharacterLength)+"</div>":c[h].translatedError?S+='<div class="fc-red comment-error">'+c[h].translatedError+"</div>":t[c[h].code]&&(S+='<div class="fc-red comment-error">'+t[c[h].code]+"</div>");else E&&(S+=m);return S+="</form>",n.forEach((e=>{e.replyAreaFilter&&(S=e.replyAreaFilter(o,E,!!a[h],h,S))})),S}function x(e,t){return(t?'<d class="new-comments-count">'+Number(t).toLocaleString()+"</d> <span>"+(t>1?e.t62:e.t61):"")+"</span>"}function y(e,t,n){if(!n.nestedChildrenCount)return"";const o=t[n._id];{const t=' <span class="count">'+Number(n.nestedChildrenCount).toLocaleString()+"</span>";return'<div class="toggle-replies" data-comment-id="'+n._id+'">'+(o?'<i class="icon eye"></i><span>'+e.t45+t+"</span>":'<i class="icon eye-slash"></i><span>'+e.t46+t)+"</span></div>"}}function I(e,t,n,o,i,s,a,r){let c="";if(e.disableVoting)return c;a.errorAlreadyVoted?c+='<div class="fc-red">'+t.t36+"</div>":a.isDeleted||e.disableVoting||(c+='<div class="comment-vote-options">',a.votesUp&&(c+=`<span class="votes-up" title="${t.t68}">${Number(a.votesUp).toLocaleString()}</span>`),c+='<span class="upvote icon up'+(a.isVotedUp?" active":"")+'" data-comment-id="'+a._id+'" title="'+t.t37+'"></span>',a.voteStyle||(c+='<i class="divider"></i>',c+='<span class="downvote icon down'+(a.isVotedDown?" active":"")+'" data-comment-id="'+a._id+'" title="'+t.t38+'"></span>',a.votesDown&&(c+=`<span class="votes-down" title="${t.t69}">${Number(a.votesDown).toLocaleString()}</span>`)),e.enableViewCounts&&(c+='<i class="divider"></i>',c+='<span class="view-count" title="'+t.t298+'"><i class="icon eye"></i>'+(a.viewCount?Intl.NumberFormat(navigator.language,{notation:"compact",maximumFractionDigits:1}).format(a.viewCount):0)+"</span>"),c+="</div>");let d=!1;if(a.pendingAuthVotingDir&&(c+='<form class="comment-vote-auth auth-input">',e.sso&&!e.allowAnon?(e.sso.loginURL||e.sso.loginCallback)&&(c+='<a class="sso-login" '+(e.sso.loginURL?'href="'+e.sso.loginURL+'"':"")+">"+t.t97+"</a>"):(e.sso&&(e.sso.loginURL||e.sso.loginCallback)&&(c+='<a class="sso-login" '+(e.sso.loginURL?'href="'+e.sso.loginURL+'"':"")+">"+t.t71+"</a>"),e.disableEmailInputs||(c+='<div class="reasoning">'+t.t39+"</div>",c+='<input name="fastcomments-email" '+(e.allowAnon?"":"required")+' type="email" id="email-vote-input-for-comment-'+a._id+'" data-restore-id="fcev-'+a._id+'" placeholder="'+t.t41+'" value="'+(e.prefillEmail?e.prefillEmail:"")+'" />'),a.voteUsernameTaken&&(c+='<div class="fc-red">'+t.t42+"</div>"),c+='<input name="fastcomments-username" required type="text" id="username-vote-input-for-comment-'+a._id+'" data-restore-id="fcuv-'+a._id+'" placeholder="'+t.t19+'"'+(e.defaultUsername?'value="'+e.defaultUsername+'"':"")+" />",a.voteInProgress&&(d=!0,c+=i),c+='<div class="buttons">',c+='<button class="vote-auth-cancel" data-comment-id="'+a._id+'" type="button">'+t.t43+"</button>",c+='<button class="vote-auth-submit" data-comment-id="'+a._id+'" type="submit">'+t.t44+"</button>",c+="</div>"),c+="</form>"),a.pendingVote&&(c+='<div class="vote-awaiting-verification">'+t.t93+"</div>"),n[a._id])if("object"==typeof n[a._id]&&"banned"===n[a._id].code){let e=t.t58;n[a._id].bannedUntil&&(e+=" "+t.t119.replace("[endsText]",new Date(n[a._id].bannedUntil).toLocaleString())),c+='<div class="fc-red">'+e+"</div>"}else"string"==typeof n[a._id]?c+=n[a._id]:c+=s;else!d&&a.voteInProgress&&(c+=i);return c}function w(e,t,n,o,i,s,a,r){const c=a._id,d=o&&(a.userId===o.id||a.anonUserId===o.id),l=!e.readonly&&!a.isDeleted&&(o&&(i||d)||a.editKey)&&(!e.disableCommenterCommentEdit||i),m=l?l&&(!e.disableCommenterCommentDelete||i):s,p=!e.readonly&&i&&!a.parentId,u=!a.isDeleted&&!a.isByAdmin&&!a.isByModerator&&!d&&o&&!e.disableBlocking,g=!a.isDeleted&&!d&&o&&(o.authorized||o.isAnonSession&&e.allowAnonFlag);let f="";if(l){if(r)return!0;f+='<div class="menu-edit-comment" data-comment-id="'+c+'"><i class="icon edit-big"></i><span>'+t.t75+"</span></div>"}if(p&&r)return!0;if(m){if(r)return!0;f+='<div class="menu-delete-comment" data-comment-id="'+c+'"><i class="icon trash"></i><span>'+t.t76+"</span></div>"}if(u||a.isBlocked){if(r)return!0;f+='<div class="'+(a.isBlocked?"menu-unblock-user":"menu-block-user")+'" data-comment-id="'+c+'"><i class="icon block"></i><span>'+(a.isBlocked?t.t142:t.t141)+"</span></div>"}if(g){if(r)return!0;f+='<div class="'+(a.isFlagged?"menu-unflag":"menu-flag")+'" data-comment-id="'+c+'"><i class="icon flag"></i><span>'+(a.isFlagged?t.t247:t.t246)+"</span></div>"}if(n&&n.length>0)for(const e of n)if(e.menuBottom){const t=e.menuBottom(a);if(t){if(r)return!0;f+=t}}return!r&&f}function E(e,t,n,o,i,s,a){const r=w(e,t,n,o,i,s,a,!0);let c="";return r?(c+='<div class="menu">',c+='<div class="menu-btn icon edit-small"></div>',c+="</div>"):c='<div class="menu empty"><div class="menu-btn icon edit-small" title="No actions available."></div></div>',n.forEach((e=>{e.menuFilter&&(c=e.menuFilter(a,c))})),c}function S(e,t){return t.replace("[v]",e)}function k(e,t){const n=(Date.now()-t)/1e3,o=Math.floor(n/86400);return isNaN(o)||o<0?e.t2:0===o&&(n<60&&e.t2||n<120&&e.t3||n<3600&&S(Math.floor(n/60),e.t4)||n<7200&&e.t5||n<86400&&S(Math.floor(n/3600),e.t6))||1===o&&e.t7||o<7&&S(o,e.t8)||7===Math.floor(o)&&e.t100||o<31&&S(Math.ceil(o/7),e.t9)||o<365&&S(Math.ceil(o/30),e.t10)||S(Math.ceil(o/365),e.t11)}function C(e,t,n,o){return e.absoluteAndRelativeDates?k(t,n)+'<span class="abs-date">'+n.toLocaleDateString()+"</span>":e.absoluteDates?o:k(t,n)}function T(e){let t=[];for(const n in e){e[n]&&t.push(n+"="+encodeURIComponent(e[n]))}return"?"+t.join("&")}function _(e,t){let n=e.length;for(;n--;){const o=e[n];if(!1===t(o))break;o.children&&_(o.children,t)}}const L=0,N=1;function O(e,t,n,o,i,s,a){if(t.disableLiveCommenting||i.presencePollState===L)return;const r={};i.userIdsToCommentIds={},i.usersOnlineMap={},_(a,(function(e){A(i,e,r)}));const c=Object.keys(r);c.length>0?M(e,t,n,o,i,s,c):i.heartbeatActive||(R(t,o),D(e,t,n,o,i,s,c),i.heartbeatActive=!0)}function M(e,t,o,i,s,a,r,c){n(t,"GET","/user-presence-status"+T({tenantId:t.tenantId,urlIdWS:i,userIds:r.join(",")}),null,(function(n){if("success"===n.status&&n.userIdsOnline)for(const i in n.userIdsOnline){const r=n.userIdsOnline[i];s.usersOnlineMap[i]!==r&&(s.usersOnlineMap[i]=r,U(e,t,o,s,a,i))}s.heartbeatActive||(R(t,i),D(e,t,o,i,s,a,r),s.heartbeatActive=!0),c&&c()}),c)}function A(e,t,n){t.userId&&(e.userIdsToCommentIds[t.userId]||(e.userIdsToCommentIds[t.userId]=[],n&&void 0===e.usersOnlineMap[t.userId]&&(n[t.userId]=!0)),e.userIdsToCommentIds[t.userId].includes(t._id)||e.userIdsToCommentIds[t.userId].push(t._id)),t.anonUserId&&(e.userIdsToCommentIds[t.anonUserId]||(e.userIdsToCommentIds[t.anonUserId]=[],n&&void 0===e.usersOnlineMap[t.anonUserId]&&(n[t.anonUserId]=!0)),e.userIdsToCommentIds[t.anonUserId].includes(t._id)||e.userIdsToCommentIds[t.anonUserId].push(t._id))}function R(e,t){setTimeout((function o(){n(e,"PUT","/user-presence-heartbeat"+T({tenantId:e.tenantId,urlIdWS:t,sso:e.sso?JSON.stringify(e.sso):void 0}),null,(function(){setTimeout(o,18e5)}),(function(){setTimeout(o,18e5)}))}),18e5)}function D(e,t,n,o,i,s,a){if(i.presencePollState===N){const r=3e4+Math.ceil(1e4*Math.random());setTimeout((function c(){M(e,t,n,o,i,s,a,(function(){setTimeout(c,r)}))}),r)}}function U(e,t,n,o,i,s,a){if(t.disableLiveCommenting)return;"boolean"==typeof a&&(o.usersOnlineMap[s]=a);const r=o.userIdsToCommentIds[s];if(r)for(const e of r){const s=document.getElementById(e);if(s){const r=s.querySelector(".activity-icon");if(r){const s=i[e];if(s){let e;"boolean"==typeof a?(e=a,o.usersOnlineMap[s.userId]=a,o.usersOnlineMap[s.anonUserId]=a):e=o.usersOnlineMap[s.userId]||o.usersOnlineMap[s.anonUserId],r.outerHTML=z(t,n,e)}}}}}function z(e,t,n){return e.disableLiveCommenting?"":'<i class="activity-icon'+(n?" online":" offline")+'" title="'+(n?t.t151:t.t152)+'"></i>'}function H(e){let t="";return e.displaySrc?t+='<d data-b-id="'+e.id+'" class="badge ib'+(e.cssClass?" "+e.cssClass:"")+'"><img src="'+e.displaySrc+'" '+(e.displayLabel?'title="'+e.displayLabel+(e.description?": "+e.description:"")+'"':"")+" /></d>":(t+='<d data-b-id="'+e.id+'" class="badge tb'+(e.cssClass?" "+e.cssClass:"")+'" title="'+e.description+'" ',(e.backgroundColor||e.borderColor||e.textColor)&&(t+=' style="',e.backgroundColor&&(t+="background:"+e.backgroundColor+";"),e.borderColor&&(t+="border: 1px solid "+e.borderColor+";"),e.textColor&&(t+="color: "+e.textColor+";"),t+='"'),t+=">",t+=e.displayLabel,t+="</d>"),t}const F=new RegExp("<img ","g");function P(e){return'<div class="pin-small icon" title="'+e.t94+'"></div>'}function V(e,t,n,o,i,s,a,r,c,d,l,m,g,f,b,v,w,S,k,T,_,L,N){const O=o&&(S.userId===o.id||S.anonUserId===o.id);S.dateObj||(S.dateObj=new Date(S.date));let M='<div class="comment'+(S.verified?"":" unverified")+(S.isDeleted?" is-deleted":"")+(S.isLive?" is-live":"")+(S.isSpam?" is-spam":"")+(S.isUnapproved?" is-unapproved":"")+(e.readonly?" readonly":"")+(S.isBlocked?" is-blocked":"")+(S.isUnread?" is-unread":"")+(S.isByAdmin||S.isByModerator?" is-admin":"")+(O?" is-own":"")+(_-S.dateObj.valueOf()<864e5?" 24hr":"")+'" id="'+S._id+'">';return!S.hidden&&S.isLive&&delete S.isLive,M+=function(e,t,n,o,i,s,a,r,c,d,l,m,g,f,b,v,w,S,k,T,_,L,N){let O,M="";const A=!S.isBlocked&&S.commenterLink&&e.enableCommenterLinks,R=S.dateObj?S.dateObj:new Date(S.date),D=R.toLocaleString(),U='<a href="'+((S.url?S.url:e.url)||"")+"#fast-comments-jt="+S._id+'" class="jump-link" target="_blank" data-comment-id="'+S._id+'" title="'+D+'">'+C(e,t,R,D)+"</a>";M+='<div class="inner">',M+='<div class="top-right">',e.showDateInline||(M+=U),S.isFlagged&&(M+='<i class="icon flag-small"></i>'),S.isPinned&&(M+=P(t)),M+=E(e,t,n,o,k,T,S),M+="</div>",S.wasPostedCurrentSession&&(S.isSpam?(M+='<div class="spam-notice">'+t.t49+"</div>",O=!0):S.requiresVerification&&(M+='<div class="requires-verification-approval">'+t.t50+"</div>",O=!0)),O||!1!==S.approved||(M+='<div class="awaiting-approval-notice">'+t.t56+"</div>");let B="",j=S.commenterName;S.isDeleted?j=S.isDeletedUser?t.t284:t.t78:(S.isBlocked||S.hasBlockedYou)&&(j=t.t144);const W=z(e,t,!0===i.usersOnlineMap[S.userId]||!0===i.usersOnlineMap[S.anonUserId]);if(B='<div class="commenter-name">',S.badges&&S.badges.length){B+='<d class="badges">';for(const e of S.badges)B+=H(e);B+="</d>"}if(S.verified||S.wasPostedCurrentSession&&S.requiresVerification||e.disableUnverifiedLabel||(B+='<div class="label unverified-notice">'+t.t48+"</div>"),S.displayLabel?B+='<div class="label">'+S.displayLabel+"</div>":S.isByAdmin?B+='<div class="label">'+t.t88+"</div>":S.isByModerator&&(B+='<div class="label">'+t.t89+"</div>"),B+='<b class="username">'+(e.hideAvatars?W:"")+(A?'<a href="'+S.commenterLink+'" class="website-url" rel="noreferrer noopener nofollow" target="_blank">':"")+j+(A?"</a>":"")+"</b>",B+="</div>",S.parentId&&f[S.parentId]&&(M+='<div class="icon replied"></div>'),!0!==e.hideAvatars){let n;const o=!e.disableProfiles&&(S.userId&&!S.userId.startsWith("anon:")?" open-profile":"");n=!S.avatarSrc||S.isBlocked||S.hasBlockedYou?'<d class="avatar-wrapper'+(e.defaultAvatarSrc?"":" anon")+'"><img loading="lazy" width="40" height="40" src="'+u(e)+'" alt="'+t.t52+'" class="avatar comment-image'+o+'" data-comment-id="'+S._id+'" />'+W+"</d>":'<d class="avatar-wrapper"><img loading="lazy" width="40" height="40" src="'+S.avatarSrc+'" alt="'+t.t51+'" class="avatar comment-image'+o+'" data-comment-id="'+S._id+'" />'+W+"</d>",M+=n}if(M+='<div class="comment-content" data-comment-id="'+S._id+'">',M+=B,S.hasImages&&(S.commentHTML=S.commentHTML.replace(F,"<img onload=\"window.fcHandleInlineImageLoaded('"+S._id+"', this)\" ")),n.forEach((e=>{e.commentTop&&(M+=e.commentTop(S))})),g[S._id]){let o,i;M+='<div class="comment-edit">',M+='<div class="comment-input">',e.enableWYSIWYG?(o='div contenteditable="true"',e.useSingleLineCommentInput&&(o+='enterkeyhint="send"'),i="></div>"):e.useSingleLineCommentInput?(o="input",i="/>"):(o="textarea",i="></textarea>"),M+="<"+o+' name="fastcomments-comment" autocomplete="off" class="comment-text-edit comment-input" required id="input-for-parent-'+S._id+'" data-parent-id="'+S._id+'" data-restore-id="fcc-'+S._id+'" placeholder="'+t.t23+'" maxlength="'+(e.maxCommentCharacterLength?e.maxCommentCharacterLength:2e3)+'" onfocus="window.fcHandleCommentInputSelected(event)"'+i,M+='<div class="horizontal-border-wrapper">',M+='<div class="horizontal-border horizontal-border-top-left"></div>',M+='<div class="horizontal-border horizontal-border-top-right"></div>',M+='<div class="horizontal-border horizontal-border-left"></div>',M+='<div class="horizontal-border horizontal-border-right"></div>',M+='<div class="horizontal-border horizontal-border-bottom-left"></div>',M+='<div class="horizontal-border horizontal-border-bottom-right"></div>',M+="</div>",M+="</div>",M+='<div class="reply-button-wrapper"><button type="button" data-comment-id="'+S._id+'" class="edit-save">'+t.t72+"</button></div>",M+='<div class="edit-bottom">',M+=p(e,t,n,S._id),M+="</div>",M+='<div class="cancel-button-wrapper">',M+='<button type="button" data-comment-id="'+S._id+'" class="fast-comments-reply-cancel default-hidden edit-cancel" type="button" title="'+t.t26+'"><div class="icon cross"></div></button>',M+="</div>",M+="</div>"}else M+='<div class="comment-text">',S.isDeleted&&!S.commentHTML?M+=t.t283:S.isBlocked?M+=t.t143:S.hasBlockedYou?M+=t.t145:M+=S.commentHTML,M+="</div>";S.editFailure&&(M+='<div class="fc-red edit-failure">'+(S.editFailureExpiration?t.t73:t.t74)+"</div>"),M+="</div>",M+='<div class="comment-bottom">',M+='<div class="comment-bottom-toolbar">',e.showDateInline&&(M+=U),M+='<div class="comment-toolbar-vote">'+I(e,t,l,0,w,b,S,a[S._id])+"</div>",M+='<div class="comment-toolbar-reply">',S.pendingAuthVotingDir||S.isDeleted||e.readonly||S.isLocked||!function(e,t,n){if(0===e)return!1;e||(e=10);let o=0,i=t[n.parentId];for(;i;){if(o++,o>=e)return!1;if(!i.parentId)break;i=t[i.parentId]}return!0}(e.maxReplyDepth,f,S)||L||(M+='<button class="comment-reply-start" data-comment-id="'+S._id+'"><i class="icon reply-arrow-'+(a[S._id]?"active":"inactive")+'"></i>'+t.t47+"</button>"),M+="</div>",M+="</div>",M+='<div class="reply-form-wrapper">',a[S._id]&&(M+=h(e,t,n,o,0,r,a,c,d,f,b,v,S._id,!1,void 0,k,L)),M+="</div>",n.forEach((e=>{e.commentBottom&&(M+=e.commentBottom(S))})),M+="</div>",S.errorMessage?(M+='<div class="prompt comment-error">',M+="<p>",M+=S.errorMessage,M+="</p>",M+='<div class="comment-error-close">',M+='<button class="comment-error-close-btn" type="button" data-comment-id="'+S._id+'">'+t.t147+"</button>",M+="</div>",M+="</div>"):S.promptDelete&&(M+='<div class="prompt">',M+="<p>"+t.t79+"</p>",M+="<div>",S.deleteFailure?S.deleteFailureExpiration?M+='<p class="fc-red">'+t.t81+"</p>":M+='<p class="fc-red">'+t.t82+"</p>":S.isSavingDelete?M+="<p>"+t.t80+"</p>":(M+='<button type="button" class="comment-cancel-delete" data-comment-id="'+S._id+'">'+t.t43+"</button>",M+='<button type="button" class="comment-do-delete" data-comment-id="'+S._id+'">'+t.t77+"</button>"),M+="</div>",M+="</div>"),n.forEach((e=>{e.commentInnerHTMLFilter&&(M=e.commentInnerHTMLFilter(S,M))})),M+="</div>";const q=m[S._id];let G="";if(S.hiddenChildrenCount&&!q&&(G+='<div data-comment-id="'+S._id+'" class="new-comments-message">'+x(t,S.hiddenChildrenCount)+"</div>"),S.children&&(N||(N={}),M+=y(t,m,S),M+=G,!q)){M+='<div class="children">';for(const p of S.children)!0!==p.hidden&&(N[p._id]?console.log("ERR REC 1",S._id,p._id):(N[p._id]=!0,M+=V(e,t,n,o,i,s,a,r,c,d,l,m,g,f,b,v,w,p,k,T,_,L,N)));M+="</div>"}return n.forEach((e=>{e.commentFilter&&(M=e.commentFilter(S,M))})),M}(e,t,n,o,i,s,a,r,c,d,l,m,g,f,b,v,w,S,k,T,_,L,N),M+="</div>",M}function B(e,t,n,o,i){if(!o.parentId||n[o.parentId]){if(e.push(o),o.parentId)n[o.parentId].children?i?n[o.parentId].children.push(o):n[o.parentId].children.unshift(o):n[o.parentId].children=[o];else if(t.length>0&&t[0].isPinned){let e=!1;for(let n=0;n<t.length;n++)if(!t[n].isPinned){t.splice(n,0,o),e=!0;break}e||t.push(o)}else i?t.push(o):t.unshift(o);j(n,o.parentId,1)}}function j(e,t,n){for(;t;){const o=e[t];if(!o)break;void 0===o.nestedChildrenCount&&(o.nestedChildrenCount=0),o.nestedChildrenCount+=n,t=o.parentId}}function W(e,t,n,o,i){for(;i;){const t=n[i];if(!t)break;const s=document.getElementById(i);if(s){const n=s.querySelector(".toggle-replies");n&&(n.outerHTML=y(e,o,t))}i=t.parentId}}function q(e,t,n){let o="";return e.commentCountFormat?o+=e.commentCountFormat.replace("[count]",Number(n).toLocaleString()):o+=Number(n).toLocaleString()+(1===n?t.t33:t.t32),o}function G(e,t){return(e||"").replace("[count]",Number(t).toLocaleString())}var Y=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"],J=Y.length;function K(e,t){var n=e.nodeType,o=e.nodeName;1===n&&function(e,t){for(var n=t.attributes,o=e.attributes,i=null,s=null,a=null,r=null,c=o.length-1;c>=0;--c)a=(r=o[c]).name,i=r.namespaceURI,s=r.value,i?(a=r.localName||a,t.getAttributeNS(i,a)!==s&&t.setAttributeNS(i,a,s)):t.hasAttribute(a)?t.getAttribute(a)!==s&&("null"===s||"undefined"===s?t.removeAttribute(a):t.setAttribute(a,s)):t.setAttribute(a,s);for(var d=n.length-1;d>=0;--d)!1!==(r=n[d]).specified&&(a=r.name,(i=r.namespaceURI)?(a=r.localName||a,e.hasAttributeNS(i,a)||t.removeAttributeNS(i,a)):e.hasAttributeNS(null,a)||t.removeAttribute(a))}(e,t),3!==n&&8!==n||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),"INPUT"===o?function(e,t){var n=e.value,o=t.value;$(e,t,"checked"),$(e,t,"disabled"),e.indeterminate!==t.indeterminate&&(t.indeterminate=e.indeterminate);if("file"===t.type)return;n!==o&&(t.setAttribute("value",n),t.value=n);"null"===n&&(t.value="",t.removeAttribute("value"));e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value")}(e,t):"OPTION"===o?function(e,t){$(e,t,"selected")}(e,t):"TEXTAREA"===o&&function(e,t){var n=e.value;n!==t.value&&(t.value=n);if(t.firstChild&&t.firstChild.nodeValue!==n){if(""===n&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=n}}(e,t),function(e,t){for(var n=0;n<J;n++){var o=Y[n];e[o]?t[o]=e[o]:t[o]&&(t[o]=void 0)}}(e,t)}function $(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}function X(e,t){if(!e)throw new Error(t||"AssertionError")}X.notEqual=function(e,t,n){X(e!=t,n)},X.notOk=function(e,t){X(!e,t)},X.equal=function(e,t,n){X(e==t,n)},X.ok=X;function Q(e,t,n){return X.equal(typeof e,"object","nanomorph: oldTree should be an object"),X.equal(typeof t,"object","nanomorph: newTree should be an object"),n&&n.childrenOnly?(te(t,e),e):(X.notEqual(t.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),Z(t,e))}function Z(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName||ee(e)!==ee(t)?e:(K(e,t),te(e,t),t):null:e}function ee(e){return e.dataset?e.dataset.nanomorphComponentId:void 0}function te(e,t){for(var n,o,i,s,a=0,r=0;n=t.childNodes[r],o=e.childNodes[r-a],n||o;r++)if(o)if(n)if(ne(o,n))(i=Z(o,n))!==n&&(t.replaceChild(i,n),a++);else{s=null;for(var c=r;c<t.childNodes.length;c++)if(ne(t.childNodes[c],o)){s=t.childNodes[c];break}s?((i=Z(o,s))!==s&&a++,t.insertBefore(i,n)):o.id||n.id?(t.insertBefore(o,n),a++):(i=Z(o,n))!==n&&(t.replaceChild(i,n),a++)}else t.appendChild(o),a++;else t.removeChild(n),r--}function ne(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&(3===e.type&&e.nodeValue===t.nodeValue)}function oe(e,t,o,i,s,a,r,c,d,l,m){try{if(e.disableLiveCommenting)return;let f=!1;function p(e){if("new-comment"===e.type)return e.comment._id}function u(t,o,s){n(e,"GET","/event-log/"+e.tenantId+"/"+T({urlId:i,startTime:t,endTime:o,userIdWS:a}),null,(function(e){if(e&&e.events){function t(e,t){let n=!1;for(const o of e)m=Math.max(m,o.timestamp+1),t&&t[p(o)]||!c(o)||(n=!0);n&&d&&d(),s&&s()}const n=e.events.map((function(e){return JSON.parse(e.data)}));if(r){const o=[];for(const i of n){const a=p(i);a&&o.push(a)}o.length>0?r(o,(function(e){t(n,e)})):t(n)}else t(n)}else s&&s()}),(function(e){console.error("FastComments: fetchEventLog FAILURE",e),s?s():setTimeout((function(){f||u(t,Date.now())}),5e3)}))}if(e.usePolling){function g(){f||setTimeout((function(){f||u(m,Date.now(),g)}),2e3)}return m||(m=Date.now()),g(),{close:function(){f=!0}}}{const b=new WebSocket("wss://ws.fastcomments.com/sub"+T({urlId:s,userIdWS:a,tenantIdWS:o}));return b.onopen=function(){f||(setInterval((()=>{b.readyState===WebSocket.OPEN&&b.send("ping")}),6e4),m&&u(m,Date.now()),t.forEach((function(e){e.onLiveConnectionStatusUpdate&&e.onLiveConnectionStatusUpdate(!0)})),l&&l(!0,m))},b.onerror=function(){m&&u(m,Date.now())},b.onclose=function(){m||(m=Date.now()),t.forEach((function(e){e.onLiveConnectionStatusUpdate&&e.onLiveConnectionStatusUpdate(!1)})),f||(l&&l(!1,m),setTimeout((function(){oe(e,t,o,i,s,a,r,c,d,l,m)}),4e3*Math.random()))},b.onmessage=function(e){if(f)return;const t=JSON.parse(e.data);if(m=Math.max(m,t.timestamp),r){const e=p(t);e?r([e],(function(n){n[e]||c(t)&&d&&d()})):c(t)&&d&&d()}else c(t)&&d&&d()},{close:function(){f=!0,b&&b.close()}}}}catch(v){console.error(v)}}function ie(e,t,n){return(t?e.t118:e.t117).replace("[count]",Number(n).toLocaleString())}function se(e,t){return e.substring(t-1,t)}function ae(e){e.isTypingMention=!1,re(e)}function re(e){e.searchList&&e.searchList.remove(),e.keyboardSelectedNode=null,e.container&&e.container.classList.remove("search-list-open")}function ce(e){if("DIV"===e.tagName){let t=0;const n=e.ownerDocument||e.document,o=(n.defaultView||n.parentWindow).getSelection();if(o.rangeCount>0){const n=o.getRangeAt(0),i=n.cloneRange();i.selectNodeContents(e),i.setEnd(n.startContainer,n.startOffset),t=function(e){let t=0;const n=document.createTreeWalker(e.commonAncestorContainer,NodeFilter.SHOW_TEXT,{acceptNode:function(t){return e.intersectsNode(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});for(;n.nextNode();){const o=n.currentNode;if(e.intersectsNode(o)){let n=document.createRange();n.selectNodeContents(o),o===e.endContainer&&n.setEnd(e.endContainer,e.endOffset),o===e.startContainer&&n.setStart(e.startContainer,e.startOffset),t+=n.toString().length}}return t}(i)}return{start:t}}return{start:e.selectionStart,end:e.selectionEnd}}function de(e,t,n,o){const i=e.innerHTML,s=t;o.length;e.innerHTML=i.substring(0,s)+o+n;!function(e,t){const n=document.createRange(),o=window.getSelection();n.setStart(e.childNodes[0],t),n.collapse(!0),o.removeAllRanges(),o.addRange(n)}(e,s+o.length)}function le(e,t,o){if(e.disableMentions)return;if(!o.target)return;if(!o.target.classList.contains("comment-input")&&!o.target.classList.contains("comment-text-edit"))return;const i="DIV"===o.target.tagName,s=i?o.target.innerHTML:o.target.value;if(i?o.target.innerText:o.target.value,t.isTypingMention){const a=ce(o.target);if(" "===se(s,a.start))ae(t);else{if(27===o.keyCode)return void ae(t);if("@"!==s.substr(t.mentionPosition-1,1))return void ae(t);if(40===o.keyCode)return o.preventDefault(),o.stopPropagation(),void(t.keyboardSelectedNode?t.keyboardSelectedNode.nextSibling&&!t.keyboardSelectedNode.nextSibling.classList.contains("cross")&&(t.keyboardSelectedNode.classList.remove("kb-select"),t.keyboardSelectedNode=t.keyboardSelectedNode.nextSibling,t.keyboardSelectedNode.classList.add("kb-select")):(t.keyboardSelectedNode=t.searchList.children[0],t.keyboardSelectedNode.classList.add("kb-select")));if(38===o.keyCode&&t.keyboardSelectedNode)return o.preventDefault(),o.stopPropagation(),void(t.keyboardSelectedNode.previousSibling?(t.keyboardSelectedNode.classList.remove("kb-select"),t.keyboardSelectedNode=t.keyboardSelectedNode.previousSibling,t.keyboardSelectedNode.classList.add("kb-select")):ae(t));if(13===o.keyCode&&t.keyboardSelectedNode)return o.preventDefault(),o.stopPropagation(),void t.keyboardSelectedNode.click();const r=s.substring(t.mentionPosition,a.start);t.requestId?t.requestId++:t.requestId=1;let c=t.requestId;n(e,"GET","/user-search/"+e.tenantId+"/"+T({urlId:e.urlId,sso:e.sso?JSON.stringify(e.sso):null,usernameStartsWith:r,mentionGroupIds:e.mentionGroupIds?e.mentionGroupIds.join(","):null}),null,(function(n){if(t.requestId===c)if("success"===n.status){if(!n.users.length)return void re(t);const r=o.target.parentNode;if(r){let c=r.querySelector(".search-list");c||(c=document.createElement("div"),c.classList.add("search-list"),c.addEventListener("click",(function(e){if(e.target)if(e.target.classList.contains("search-entry")){const n=a.start,r=s.substring(n,s.length),c=e.target.attributes["data-id"].value,d=e.target.attributes["data-name"].value;if(i)de(o.target,t.mentionPosition,r,d);else{const e=a.end;o.target.value=s.substring(0,t.mentionPosition)+d+r,o.target.selectionEnd=n===e?t.mentionPosition+d.length:e+d.length}o.target.focus(),o.target.currentCommentMentions||(o.target.currentCommentMentions=[]),o.target.currentCommentMentions.push({id:c,tag:"@"+d,sent:!1}),ae(t)}else e.target.classList.contains("cross")&&ae(t)})),r.appendChild(c));let d="";for(let t=0;t<n.users.length;t++){const o=n.users[t];d+=`<div class="search-entry ${t===n.users.length-1?"last":""}" data-id="${o.id}" data-type="${o.type}" data-name="${o.name}">\n                                <img src="${o.avatarSrc?o.avatarSrc:u(e)}" alt="${o.name}" title="${o.name}" />\n                                <span>${o.name}</span>\n                            </div>`}d+='<i class="icon cross"></i>',c.innerHTML=d,t.searchList=c,t.container=r.parentNode,t.container.classList.add("search-list-open")}}else console.error("User search failure",n)}))}}else if(s){const e=ce(o.target).start;i?"@"===function(e,t){const n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);let o=0,i="";for(;n.nextNode();){const e=n.currentNode.nodeValue;if(o+e.length>=t){i=e[t-o-1];break}o+=e.length}return i}(o.target,e)&&(t.isTypingMention=!0,t.mentionPosition=e):"@"===se(s,e)&&(t.isTypingMention=!0,t.mentionPosition=e)}}function me(e,t){return e.substring(t-1,t)}function pe(e){e.isTypingHashTag=!1,ue(e)}function ue(e){e.searchList&&e.searchList.remove(),e.keyboardSelectedNode=null,e.container&&e.container.classList.remove("search-list-open")}function ge(e,t,o){if(o.target&&(o.target.classList.contains("comment-input")||o.target.classList.contains("comment-text-edit")))if(t.isTypingHashTag)if(" "===me(o.target.value,o.target.selectionStart))pe(t);else{if(27===o.keyCode)return void pe(t);if("#"!==o.target.value.substr(t.mentionPosition-1,1))return void pe(t);if(40===o.keyCode)return o.preventDefault(),o.stopPropagation(),void(t.keyboardSelectedNode?t.keyboardSelectedNode.nextSibling&&!t.keyboardSelectedNode.nextSibling.classList.contains("cross")&&(t.keyboardSelectedNode.classList.remove("kb-select"),t.keyboardSelectedNode=t.keyboardSelectedNode.nextSibling,t.keyboardSelectedNode.classList.add("kb-select")):(t.keyboardSelectedNode=t.searchList.children[0],t.keyboardSelectedNode.classList.add("kb-select")));if(38===o.keyCode&&t.keyboardSelectedNode)return o.preventDefault(),o.stopPropagation(),void(t.keyboardSelectedNode.previousSibling?(t.keyboardSelectedNode.classList.remove("kb-select"),t.keyboardSelectedNode=t.keyboardSelectedNode.previousSibling,t.keyboardSelectedNode.classList.add("kb-select")):pe(t));if(13===o.keyCode&&t.keyboardSelectedNode)return o.preventDefault(),o.stopPropagation(),void t.keyboardSelectedNode.click();const i=o.target.value.substring(t.mentionPosition,o.target.selectionStart);t.requestId?t.requestId++:t.requestId=1;let s=t.requestId;i.length>1&&n(e,"GET","/hash-tag-search/"+e.tenantId+"/"+T({urlId:e.urlId,sso:e.sso?JSON.stringify(e.sso):null,startsWith:"#"+i}),null,(function(e){if(t.requestId===s)if("success"===e.status){if(!e.hashTags.length)return void ue(t);const n=o.target.parentNode;if(n){let i=n.querySelector(".search-list");i||(i=document.createElement("div"),i.classList.add("search-list"),i.addEventListener("click",(function(e){if(e.target)if(e.target.classList.contains("search-entry")){const n=o.target.selectionStart,i=o.target.selectionEnd,s=o.target.value.substring(o.target.selectionStart,o.target.value.length),a=e.target.attributes["data-tag"].value;o.target.value=o.target.value.substring(0,t.mentionPosition-1)+a+s,o.target.selectionEnd=n===i?t.mentionPosition-1+a.length:i+a.length,o.target.focus(),o.target.currentCommentHashTags||(o.target.currentCommentHashTags=[]),o.target.currentCommentHashTags.push({tag:a}),pe(t)}else e.target.classList.contains("cross")&&pe(t)})),n.appendChild(i));let s="";for(let t=0;t<e.hashTags.length;t++){const n=e.hashTags[t];s+=`<div class="search-entry ${t===e.hashTags.length-1?"last":""}" data-tag="${n.tag}">\n                                <span>${n.tag}</span>\n                            </div>`}s+='<i class="icon cross"></i>',i.innerHTML=s,t.searchList=i,t.container=n.parentNode,t.container.classList.add("search-list-open")}}else console.error(e)}))}else o.target.value&&"#"===me(o.target.value,o.target.selectionStart)&&(t.isTypingHashTag=!0,t.mentionPosition=o.target.selectionStart)}function fe(e,t,n,i){const s=document.getElementById(t);s&&setTimeout((function(){!function(e,t){o(JSON.stringify({type:"scroll-to-position",instanceId:e,y:t}),"*")}(e,s.getBoundingClientRect().top-(i||0))}),n)}function be(e,t){const n=t.includes("?")?"&":"?";return t+n+"_sessionId="+encodeURIComponent(e)}function ve(t,n,o,i,s){if(!s){if(!t.enableThirdPartyCookieBypass)return i(o,void 0,n);if(!window.document||document.cookie.includes("fastcomments.sid"))return i(o,void 0,n);if(n&&"_sessionId"in n)return i(be(n._sessionId,o),n._sessionId,n)}let a=!1;function r(e,t,n){a||(a=!0,i(e,t,n))}try{s||setTimeout((function(){r(o,void 0)}),15e3);const i=window.screen.availWidth?Math.max(Math.floor(window.screen.availWidth/2),500):500,a=window.screen.availHeight?Math.max(Math.floor(window.screen.availHeight/2),500):500,c=window.open(e+"/cookie-setup?instanceId="+encodeURIComponent(t.instanceId)+"&tenantId="+encodeURIComponent(t.tenantId),"_blank","status=yes,toolbar=no,menubar=no,location=no,width="+i+",height="+a);if(!c)return r(o,void 0,n);{c.onmessage=function(e){try{const t=e.data;return t.sessionId?(n&&(t.user&&(n=t.user),n._sessionId=t.sessionId),r(be(t.sessionId,o),t.sessionId,n)):r(o,void 0,n)}catch(e){return console.error(e),r(o,void 0,n)}},c.oncancel=function(){console.error("3PC: ERR0"),r(o,void 0,n)},c.onabort=function(){console.error("3PC: ERR1"),r(o,void 0,n)},c.onerror=function(){console.error("3PC: ERR2"),r(o,void 0,n)};const e=setInterval((function(){c.closed&&(console.log("3PC: CL"),clearInterval(e),r(o,void 0,n))}),500)}}catch(e){return console.error(e),r(o,void 0,n)}}function he(e){if(e&&(e.remove(),e.removed=!0),window.fcFloatingMenus.length>0){for(const e of window.fcFloatingMenus)t=e.instanceId,o(JSON.stringify({type:"stop-detect-clicks-outside",instanceId:t}),"*"),e.remove(),e.removed=!0;return window.fcFloatingMenus=[],!0}var t;return!1}function xe(e,t,n,i,s,a,r,c){he();const d=w(e,t,n,i,s,a,c);if(!d)return;const l=document.createElement("div");l.commentId=c._id,l.instanceId=e.instanceId,l.classList.add("menu-content","card","goes-black"),l.innerHTML=d;const m=r.getBoundingClientRect(),p=document.body.querySelector(".fast-comments");var u;l.style.visibility="hidden",window.fcFloatingMenus.push(l),p.appendChild(l),u=e.instanceId,o(JSON.stringify({type:"detect-clicks-outside",instanceId:u}),"*"),setTimeout((function(){if(l.removed)return;l.style.visibility="visible";const e=m.y-p.offsetTop+r.clientHeight/2;l.style.top=e+"px",l.style.left=m.x-p.offsetLeft-l.clientWidth+r.clientWidth/2+"px",l.setAttribute("data-comment-id",c._id),l.addEventListener("mouseleave",(function(){he(l)}));const t=document.querySelector(".comments");if(t){const n=t.clientHeight,o=l.getBoundingClientRect(),i=t.getBoundingClientRect();n>l.clientHeight&&o.bottom>i.bottom?(l.classList.add("corner-bottom-right"),l.style.top=e-l.clientHeight+"px"):l.classList.remove("corner-bottom-right")}const o=n.find((function(e){return"actions"===e.id}));o?o.config?l.classList.add("loaded"):l.classList.add("animated-background"):(l.classList.add("animated-background"),l.style.pointerEvents="none",FastCommentsUI.addExtension("actions","/js/comment-ui/extensions/comment-ui.actions.extension.min.js",!0,(function(){l&&(l.style.pointerEvents="all",l.classList.add("loaded"),l.classList.remove("animated-background"))})))}),0)}let ye,Ie;function we(e,t){return"all"===e.tenantId&&e.userId&&t?t.tenantId:e.tenantId}window.fcFloatingMenus||(window.fcFloatingMenus=[]);const Ee=function(e){return document.getElementById(e)},Se=function(e,t){return e.target.attributes.getNamedItem(t)},ke=function(e,t){return e.getAttribute(t)};function Ce(u,v,y){!function(e){e.simpleSSO&&(e.simpleSSO.email?(e.sso={},e.sso.simpleSSOUser=e.simpleSSO,e.simpleSSO.loginURL&&(e.sso.loginURL=e.simpleSSO.loginURL),e.simpleSSO.logoutURL&&(e.sso.logoutURL=e.simpleSSO.logoutURL),e.simpleSSO.logoutCallback&&(e.sso.logoutCallback=e.simpleSSO.logoutCallback),e.simpleSSO.logoutCallback&&(e.sso.logoutCallback=e.simpleSSO.logoutCallback)):e.sso=e.simpleSSO)}(v);let E,S,k,L,N,M,R,D,z,H,F,P,Y,J,K,$,X,Z,ee,te,ne,se,ae=v.url?v.url:window.ReactNativeWebView?null:window.location.href,re=v.urlId?v.urlId:window.location.href,ce={},de={},me={},pe={},ue={},be={},Ce={},Te=[],_e=0,Le="number"==typeof v.startingPage?v.startingPage:0,Ne=[],Oe=[],Me=[],Ae={ERROR_MESSAGE:"Whoops! Something went wrong. Please try again later."},Re=!0,De=v.sso?JSON.stringify(v.sso):null,Ue=v.defaultSortDirection,ze={},He=!1,Fe=!1;if(v.sso&&"object"!=typeof v.sso)throw new Error("Invalid SSO Configuration!");function Pe(e){L=e,FastCommentsUI.currentUser=e}Pe(!v.sso&&v.simpleSSO&&v.simpleSSO.username?v.simpleSSO:void 0);const Ve=v.urlId.includes("googleusercontent.com"),Be=v.tenantId;u.classList.add("v2"),void 0===v.countAll&&(v.countAll=!0),FastCommentsUI.makeRequest=n,FastCommentsUI.createURLQueryString=T,FastCommentsUI.redirect=i,FastCommentsUI.newBroadcastId=gt,FastCommentsUI.addExtension=Xe;const je={usersOnlineMap:{},userIdsToCommentIds:{}},We={},qe=[];let Ge=0;function Ye(){var e;e=v.instanceId,o(JSON.stringify({type:"on-render",instanceId:e}),"*"),qe.forEach((e=>{e.onRender&&e.onRender()}))}function Je(e,t,n){const o=qe.find((function(t){return t.id===e}));o?n(o):Xe(e,t,!0,(function(e){e.css&&at(et),n(e)}))}function Ke(e){Ge++,e||Ge!==qe.length||Ze()}function $e(){return Ue}function Xe(e,n,o,i){const s=document.createElement("script");n.startsWith("http")||(n=t+n+"?d=24105541"),s.setAttribute("src",n),s.onload=function(){let t,n;qe.forEach((function(o){o.id===e&&(o.config=v,o.translations=Ae,o.commentsById=E,o.commentsEditingById=pe,o.commentsTree=S,o.reRenderComment=rt,o.repositionComment=ft,o.renderCommentsTree=et,o.removeCommentAndReRender=ut,o.saveUIStateAndRestore=at,o.newBroadcastId=gt,o.root=u,o.setupEventHandlers&&o.setupEventHandlers(u,ce),o.notificationState=We,o.getSortDirection=$e,t=o.init,n=o)})),t?t((function(){Ke(o),i&&i(n)})):(Ke(o),i&&i(n))},document.body.appendChild(s),qe.push({id:e,scriptNode:s})}v.jumpToHashTag&&Xe("filter-by-hash-tag","/js/comment-ui/extensions/comment-ui.filter-by-hash-tag.extension.min.js",!1),v.inlineReactImages&&Xe("reacts","/js/comment-ui/extensions/comment-ui.reacts.extension.min.js",!1),v.useSingleReplyField&&Xe("single-reply-field","/js/comment-ui/extensions/comment-ui.single-reply-field.extension.min.js",!1),(v.enableWYSIWYG||v.experimentalWYSIWYG)&&(v.enableWYSIWYG=!0,Xe("wysiwyg","/js/comment-ui/extensions/comment-ui.wysiwyg.extension.min.js",!1)),v.enableInfiniteScrolling&&Xe("infinite-scroll","/js/comment-ui/extensions/comment-ui.infinite-scroll.extension.min.js",!1),v.extensions&&v.extensions.forEach((function(e){Xe(e.id,e.path,!1)})),window.FastCommentsUI.extensions=qe,0===qe.length&&Ze();var Qe=void 0;function Ze(){function t(e,t){Le<=0||(e&&e(),u.classList.add("loading"),Le--,$e((function(){u.classList.remove("loading"),t&&t()}),!0))}function s(e,t){P&&(e&&e(),u.classList.add("loading"),Le++,$e((function(){u.classList.remove("loading"),t&&t()})))}function g(e){e.resetAndReRender=Ke,e.paginatePrev=t,e.paginateNext=s,e.handleLiveEvent=Ze,e.reRender=function(e){e?et():at(et)}}for(const e of qe)g(e);void 0!==Qe&&clearInterval(Qe),Qe=setInterval(it,1e3),window.fcHandleInlineImageLoaded=function(e,t){let n=E[e]._imageSizes;n||(n={}),n[t.src]={w:t.width,h:t.height},E[e]._imageSizes=n,setTimeout(it,300)},ce["open-profile"]=function(e){if(v.disableProfiles)return;const t=Se(e,"data-comment-id");if(t){const n=t.value,o=E[n];o&&o.userId&&(m(v.instanceId,o.userId,L,o),te=e.target.parentNode,te.classList.add("animated-background"))}else L&&L.id&&(m(v.instanceId,L.id,L,null),te=e.target.parentNode,te.classList.add("animated-background"))};const f=ce["comment-reply-start"];function b(e,t,o,i,s){const a=E[e];if((!L||L.isAnonSession)&&!v.allowAnonVotes)if(v.allowAnon){if(!o)return a.pendingAuthVotingDir=t,void ct(a)}else if(!o||!i)return a.pendingAuthVotingDir=t,void ct(a);a.didVoteThisSession=!0,a.voteInProgress=!0,delete ue[e],ct(a);const r=gt(),d="/comments/"+we(v,E[e])+"/"+e+"/vote"+T({urlId:re,sso:De,broadcastId:r,sessionId:L?L.sessionId:void 0});ve(v,L,d,(function(r,d){n(v,"POST",r,{voteDir:t,commentId:e,urlId:re,url:ae,commenterName:L&&L.username?L.username:o,commenterEmail:L&&L.email?L.email:i},(function(n){delete a.voteInProgress,"success"===n.status?("up"===t?(a.isVotedUp=!0,a.votes++,a.votesUp=(a.votesUp||0)+1):(a.isVotedDown=!0,a.votes--,a.votesDown=(a.votesDown||0)+1),a.myVoteId=n.voteId,c(v.instanceId,a,n.voteId,t,n.status),n.editKey?a.voteEditKey=n.editKey:delete a.voteEditKey,delete a.pendingAuthVotingDir,delete a.voteUsernameTaken,ct(a),s&&s(n,d)):"pending-verification"===n.status?("up"===t?a.isVotedUp=!0:a.isVotedDown=!0,n.isVerified||(a.pendingVote=!0),a.myVoteId=n.voteId,c(v.instanceId,a,n.voteId,t,n.status),a.voteEditKey=n.editKey,delete a.pendingAuthVotingDir,delete a.voteUsernameTaken,ct(a),s&&s(n,d)):"failed"===n.status?("already-voted"===n.code?(a.errorAlreadyVoted=!0,delete a.pendingAuthVotingDir,delete a.voteUsernameTaken):"username-taken"===n.code?a.voteUsernameTaken=!0:"banned"===n.code?ue[e]=n:n.translatedError&&(ue[e]=n.translatedError),ct(a)):ue[e]=!0}),(function(){ue[e]=!0}))}))}function h(e){const t=e._id;e.didVoteThisSession=!1,e.voteInProgress=!0,delete ue[t],ct(e);const o=gt(),i="/comments/"+we(v,E[t])+"/"+t+"/vote/"+e.myVoteId+T({voteId:e.myVoteId,editKey:e.voteEditKey,commentId:t,sso:De,broadcastId:o,urlId:re});ve(v,L,i,(function(o){n(v,"DELETE",o,null,(function(n){delete e.voteInProgress,"success"===n.status?(c(v.instanceId,e,e.myVoteId,"deleted",n.status),e.isVotedUp?(delete e.isVotedUp,n.wasPendingVote||(e.votes--,e.votesUp--)):(delete e.isVotedDown,n.wasPendingVote||(e.votes++,e.votesDown--)),ct(e)):"failed"===n.status?("banned"===n.code&&(ue[t]=n),ct(e)):ue[t]=!0}),(function(){ue[t]=!0}))}))}function x(e,t,n){return function(o){if(o.target){const e=o.target.querySelector("textarea");e&&e.focus()}const i=Se(o,"data-parent-id");if(!i)return;const s=i.value;n&&n(s);const a=u.querySelector("."+t+"["+e+'="'+s+'"]');a&&a.classList.add("show-default-hidden"),st()}}function y(e,t){const n=Ee("input-for-parent-"+t);if("gif"===e)return void Je("gifs","/js/comment-ui/extensions/comment-ui.gifs.extension.min.js",(function(e){e.toggleOpen(t,(function(e){const n=(o=t&&"null"!==t?t:null,at((function(){const e=u.querySelector('.toolbar[data-comment-id="'+o+'"]');e&&(e.outerHTML=p(v,Ae,qe,o)),st()})),Ye(),u.querySelector('.toolbar[data-comment-id="'+o+'"]'));var o;e&&e(n)}))}));const o={bold:"b",ul:"u",it:"i",s:"strike",code:"code",spoiler:"spoiler"};let i,s,a,r,c,d;function l(){"link"===e?(c="["+(a?"":Ae.t91),d="]("+(a&&a.startsWith("http")?a:"https://example.com")+")"):(c=`<${o[e]}>`,d=`</${o[e]}>`)}return n.isContentEditable?(l(),Je("wysiwyg","/js/comment-ui/extensions/comment-ui.wysiwyg.extension.min.js",(function(t){const n=o[e].toUpperCase();t.handleWYSIWYGAction(n)}))):(i=n.selectionStart,s=n.selectionEnd,r=n.value,a=r.substring(i,s),l(),n.value=r.substring(0,i)+c+a+d+r.substring(s),n.selectionStart=n.selectionEnd=i+c.length+a.length+d.length),n.focus(),!1}function I(e){if(e.target.form){const t=e.target.form.querySelector('button[type="submit"]');t&&t.click()}}ce["comment-reply-start"]=function(e){const t=Se(e,"data-comment-id").value;Ce[t]=!0,f?f(e):lt(t)},ce["fast-comments-reply"]=function(e){if(v.readonly)return;let t=Se(e,"data-parent-id").value;if("null"===t&&(t=null),He&&null===t){e.preventDefault(),He=!1,at(et);return void Ee("input-for-parent-"+t).focus()}let i=!1;const s=Ee("username-input-for-parent-"+t),a=s?s.value:null,r=Ee("email-input-for-parent-"+t),c=r?r.value:null,l=Ee("input-for-parent-"+t),m=l.value||l.innerHTML,p=v.allowAnon,g=Ee("link-input-for-parent-"+t),f=g?g.value:null;if(s&&!p&&r&&(!a||!p&&!c)||!m)return;if(!p&&r&&r.validity.typeMismatch)return;e.preventDefault();const b=L?L.id:null;L&&L.username||!a||(i=!0);const h=we(v,t?E[t]:null),x=function(e){return"all"===Be&&v.userId&&e&&e.urlId?e.urlId:re}(t?E[t]:null),y=new Date,I={tenantId:h,urlId:x,url:ae,pageTitle:v.pageTitle,commenterName:L&&L.username?L.username:a,commenterEmail:L&&L.email?L.email:c,commenterLink:L&&L.websiteUrl?L.websiteUrl:f,avatarSrc:L&&v.simpleSSO?L.avatarSrc||L.avatar:void 0,comment:m,parentId:t,date:y.valueOf(),localDateString:y.toString(),localDateHours:y.getHours(),productId:v.productId,meta:v.commentMeta,mentions:l.currentCommentMentions,hashTags:l.currentCommentHashTags,moderationGroupIds:v.moderationGroupIds,isFromMyAccountPage:"all"===Be};function w(){const e=gt(),s="/comments/"+h+"/"+T({urlId:x,sso:De,broadcastId:e,sessionId:L?L.sessionId:void 0});ve(v,L,s,(function(e,s){n(v,"POST",e,I,(function(e){delete de[t];let n=!1;if(e.customConfig&&ye(e.customConfig),"success"===e.status){if(delete l.currentCommentMentions,delete l.currentCommentHashTags,function(e,t){o(JSON.stringify({type:"reply-success",instanceId:e,comment:t}),"*")}(v.instanceId,e.comment),e.comment.wasPostedCurrentSession=!0,k++,E[e.comment._id]=e.comment,t&&(delete Ce[t],ze[t]=!1),B(Te,S,E,e.comment,v.newCommentsToBottom),W(Ae,0,E,ze,e.comment.parentId),e.user){if(v.simpleSSO)for(const t in e.user)L[t]=e.user[t];else Pe(e.user),s&&(L._sessionId=s);d(v.instanceId,"user-set",L)}delete me[t],L&&e.user&&e.user.sessionId&&(L.sessionId=e.user.sessionId,d(v.instanceId,"session-id-set",L)),n=!0,null!==t||v.disableSuccessMessage||(He=!0),nt(t)}else{if(i&&(Pe(null),d(v.instanceId,"authentication-failed",I)),e.translations)for(const t in e.translations)v.translations[t]=e.translations[t];me[t]=e}const a=L?L.id:null;if(a!==b||e.userIdWS!==Q?Ge(pe,G,e.userIdWS):O(u,v,Ae,pe,je,E,S),at(null===t||a!==b?et:function(){rt(E[t])}),n){const e=u.querySelector('[data-restore-id="fcc-null"]');e&&(e.attributes.contenteditable?e.innerHTML="":e.value="")}qe.forEach((t=>{t.newComment&&t.newComment(e.comment)})),qe.forEach((t=>{t.onReplySuccess&&t.onReplySuccess(e.comment)}))}),(function(e){e.customConfig&&ye(e.customConfig),delete de[t],i&&(Pe(null),d(v.instanceId,"authentication-failed",I)),e&&e.code?me[t]=e.code:me[t]=!0,at(et)}))}))}qe.forEach((e=>{e.prepareCommentForSaving&&e.prepareCommentForSaving(I,t)})),de[t]=!0,at(null===t?et:function(){rt(E[t])}),v.onCommentSubmitStart?(ne=w,se=function(e){i=!1,e&&(me[t]=e),de[t]=!1,at(null===t?et:function(){rt(E[t])})},function(e,t){o(JSON.stringify({type:"on-c-s-start",instanceId:e,comment:t}),"*")}(v.instanceId,I)):w()},ce["fc-login"]=function(){ve(v,L,"",(function(e,t,n){Pe(n),at(et)}),!0)},ce["fast-comments-reply-cancel"]=function(e){const t=Se(e,"data-parent-id");if(!t)return;const n=t.value;delete me[n],"null"!==n&&delete Ce[n],delete de[n],lt(n)},ce["menu-btn"]=function(e){const t=e.target.closest(".comment");if(!t)return;const n=E[t.id];n&&xe(v,Ae,qe,L,N,Fe,e.target,n)},ce.upvote=function(e){if(v.readonly)return;const t=Se(e,"data-comment-id").value,n=E[t];n.isVotedUp||n.isVotedDown?h(n):b(t,"up")},ce.downvote=function(e){if(v.readonly)return;const t=Se(e,"data-comment-id").value,n=E[t];n.isVotedUp||n.isVotedDown?h(n):b(t,"down")},ce["vote-auth-cancel"]=function(e){const t=Se(e,"data-comment-id").value;delete E[t].pendingAuthVotingDir,rt(E[t])},ce["vote-auth-submit"]=function(e){const t=Se(e,"data-comment-id").value,n=E[t],o=Ee("username-vote-input-for-comment-"+t),i=o?o.value:null,s=Ee("email-vote-input-for-comment-"+t),a=s?s.value:null;if(!L||L.isAnonSession)if(v.allowAnon){if(!i)return}else if(!i||!a)return;s&&a&&s.validity.typeMismatch||(e.preventDefault(),b(t,n.pendingAuthVotingDir,i,a,(function(e,t){(!L||L.isAnonSession)&&i&&a&&(Pe({username:i,email:a,_sessionId:t}),d(v.instanceId,"user-set",L),e.user&&e.user.sessionId&&(L.sessionId=e.user.sessionId,d(v.instanceId,"session-id-set",L)))})))},ce["t-create-account"]=function(e){i(v.instanceId,e.target.href)},ce["t-upgrade"]=function(e){i(v.instanceId,e.target.href)},ce["t-configure-domains"]=function(e){i(v.instanceId,e.target.href)},ce["log-out"]=function(e){if(v.sso){if(v.sso.logoutURL)return i(v.instanceId,v.sso.logoutURL);v.sso.logoutCallback&&(v.sso.logoutCallback instanceof Function?v.sso.logoutCallback(v.instanceId):(t=v.instanceId,o(JSON.stringify({type:"logout",instanceId:t}),"*")))}var t;const s=Se(e,"data-parent-id").value;delete be[s],n(v,"PUT","/auth/logout",null,(function(){let e=L?L.id:null;Pe(null),v.sso&&(v.sso.userDataJSONBase64=null,v.sso.verificationHash=null),De=v.allowAnon?null:v.sso?JSON.stringify(v.sso):null,Ge(pe,G,null),d(v.instanceId,"logout",L);for(const e in We)delete We[e];delete je.usersOnlineMap[e],delete je.userIdsToCommentIds[e],O(u,v,Ae,pe,je,E,S),at(et)}),(function(){be[s]=!0,at(et)}))},ce["sso-login"]=function(){var e;v.sso.loginURL?i(v.instanceId,v.sso.loginURL):v.sso.loginCallback instanceof Function?v.sso.loginCallback(v.instanceId):(e=v.instanceId,o(JSON.stringify({type:"login",instanceId:e}),"*"))},ce["comments-toggle"]=function(){D=!D,et()},window.fcHandleCommentInputSelected=x("data-parent-id","comment-reply"),ce["comment-input"]=window.fcHandleCommentInputSelected,ce["comment-text-edit"]=x("data-comment-id","comment-content"),ce["new-comments-message"]=function(e){const t=Se(e,"data-comment-id").value;if("null"===t){let e=30;_(S,(function(t){if(t.hidden)return e--,_e--,delete t.hidden,e>0})),_e=Math.max(_e,0),at(et)}else{let e;if(_(S,(function(n){if(n._id===t)return e=n,!1})),e){if(e.children){let t=30;_(e.children,(function(n){return n.hidden&&(delete n.hidden,e.hiddenChildrenCount--,t--),t>0}))}delete e.hidden,e.hiddenChildrenCount<=0&&delete e.hiddenChildrenCount,at((function(){rt(e)}))}else console.warn("FastComments - ERR 0",t)}},ce["load-prev-page"]=function(){t()},ce["load-next-page"]=function(){s()},ce["load-all"]=function(){u.classList.add("loading"),Le=-1,$e((function(){u.classList.remove("loading")}))},ce["toggle-replies"]=function(e){const t=Se(e,"data-comment-id").value;ze[t]=!ze[t],D=!0,at(et)},ce["comment-error-close-btn"]=function(e){const t=Se(e,"data-comment-id").value;delete E[t].errorMessage,e.target.parentNode.parentNode.remove()},ce["t-btn"]=function(e){return e.preventDefault(),y(Se(e,"data-action").value,ke(e.target.parentNode,"data-comment-id").valueOf())},ce["notification-bell"]=function(){Je("notifications-list","/js/comment-ui/extensions/comment-ui.notifications-list.extension.min.js",(function(e){e.toggleOpen(dt)}))},ce["dir-drop-btn"]=function(e){const t=Se(e,"data-value").value;Ue!=t&&(Ue=t,$e())},ce["comment-image"]=function(e){var t,n;v.disableImageRedirect&&(e.preventDefault(),e.stopPropagation()),t=v.instanceId,n=e.target.src,o(JSON.stringify({type:"on-image-clicked",instanceId:t,src:n}),"*")},ce["hash-tag"]=function(e){if(e.target.href.length>1){e.preventDefault(),e.stopPropagation();const t=Se(e,"data-tag").value;Je("filter-by-hash-tag","/js/comment-ui/extensions/comment-ui.filter-by-hash-tag.extension.min.js",(function(e){e.resetAndReRender=Ke,e.addHashTagFilter(t),Ke()}))}},u.addEventListener("change",(function(t){if(!t.target.classList.contains("file-input"))return;const n=t.target.files[0],o=new FormData;o.append("file",n);const i=new XMLHttpRequest;i.withCredentials=!0;const s=(v.apiHost?v.apiHost:e)+"/upload-image/"+Be;i.open("POST",s),i.setRequestHeader("Original-Referrer",v.originalReferrer),i.send(o),i.onload=function(){if(200===i.status){const e=Ee("input-for-parent-"+ke(t.target,"data-parent-id").valueOf()),n=JSON.parse(i.response).url;if(v.enableWYSIWYG){FastCommentsUI.extensions.find((e=>"wysiwyg"===e.id)).addImage(e,n)}else e.value+="[img]"+n+"[/img]"}t.target.value=""}})),u.addEventListener("paste",(function(e){const t=e.target;if("textarea"!==t.tagName.toLowerCase()||!e.clipboardData)return;let n=e.clipboardData.getData("text/plain");if(n&&!n.includes("<code>")&&(n.includes("{")||n.includes("(")&&n.includes("\n  ")||n.includes("<")&&n.includes(">"))){n=n.replace(/\r/g,"");const o=n;if(0!==n.indexOf("    ")){const e=n.split("\n");for(let t=0;t<e.length;t++)e[t].startsWith("  ")?e[t]="  "+e[t]:e[t]="    "+e[t];n=e.join("\n")}setTimeout((function(){const i=t.value;e.target.value=i.replace(o,"<code>"+n+"</code>")}),0)}}));const w={},V={};function j(e){return 40===e.keyCode||38===e.keyCode||13===e.keyCode}let q,G,Q,pe,he;function ye(e,t){if(e){for(const n in e)if("translations"===n)v[n]?v[n]=t?Object.assign({},v[n],e[n]):Object.assign({},e[n],v[n]):v[n]=e[n];else{const o=void 0===v[n]||t,i="wrap"===n||"hasDarkBackground"===n||"customCSS"===n;i&&v.ignoreStyleOverrides||(o||i)&&(v[n]=e[n])}!Ue&&v.defaultSortDirection&&(Ue=v.defaultSortDirection)}v.translations&&(Ae=v.translations,qe.forEach((function(e){e.translations=Ae})))}function Ie(e){if(void 0!==window.IntersectionObserver){let t=!1;const n=new IntersectionObserver((o=>{if(o[0].isIntersecting&&!t){try{e()}catch(e){console.error(e)}n.disconnect(),t=!0}}));n.observe(u)}else try{e()}catch(e){console.error(e)}}function Ge(e,t,o){if(!(pe!==e||G!==t||Q!==o))return;pe=e,G=t,Q=o,he&&he.close();const i=Date.now();Ie((function(){he=oe(v,qe,G,re,pe,Q,tt,Ze,(function(){at(et)}),(function(t,o){if(L&&U(0,v,Ae,je,E,L.id,t),t){!!o&&(je.userIdsToCommentIds={},je.usersOnlineMap={},L&&n(v,"GET","/user-notifications/get-count"+T({tenantId:Be,sso:De}),null,(function(e){"success"===e.status&&(We.count=e.count,dt())}))),Ie((function(){O(u,v,Ae,e,je,E,S)}))}}),Date.now()-i>1e3?i:void 0)}))}function Ke(){Le=0,H=void 0,Re=!0,He=!1,E={},Te=[],S=[],pe=null,G=null,Q=null,he&&he.close(),$e()}function $e(e,t){var i;i=v.instanceId,o(JSON.stringify({type:"on-init",instanceId:i}),"*");const s={urlId:re,page:Le,lastGenDate:H};0===Oe.length&&(s.includei10n="true",v.locale&&(s.locale=v.locale)),v.countAll&&(s.countAll="true"),Re&&(s.includeConfig="true",s.includeNotificationCount="true"),De&&(s.sso=De),s.direction=Ue,qe.length>0&&(s.modules=qe.map((e=>e.id)).join(",")),v.jumpToId&&(s.fetchPageForCommentId=v.jumpToId),v.isCrawler&&(s.isCrawler=!0),v.noCustomConfig&&(s.noCustomConfig=!0);const c="all"===Be&&v.userId;c&&(s.userId=v.userId,v.sso&&(s.tenantId=v.ssoTenantId));let m={url:c?"/comments-for-user":"/comments/"+Be+"/",params:s};for(const e of qe)e.mutateCommentFetchRequest&&(m=e.mutateCommentFetchRequest(m));n(v,"GET",m.url+T(m.params),void 0,(function(n){const o=Date.now(),i="rate-limited"===n.code;ye(n.customConfig),i?ee=Ae.t31:"domain-unauthorized"===n.code?ee=Ae.t86:"unauthorized-page"===n.code?ee=Ae.t153:"invalid-tenant"===n.code?ee=Ae.t111:"malformed-sso"===n.code?(ee=Ae.t87,n.reason&&"SSO Request Malformed"!==n.reason?ee?ee+=": "+n.reason:ee=n.reason:n.secondaryCode&&(ee?ee+=": "+n.secondaryCode:ee=n.secondaryCode)):Ve?ee=Ae.t146:n.isCommentsHidden&&(ee=Ae.t28),!1===n.isProd&&(v.isProd=!1),"number"==typeof n.pageNumber&&(Le=n.pageNumber,Ne.includes(Le)||Ne.push(Le)),"number"==typeof n.notificationCount&&(We.count=n.notificationCount);const s=n.comments||[],c="NF"===v.defaultSortDirection&&v.newCommentsToBottom;if(c&&s.reverse(),Number.isFinite(n.commentCount)&&(F=n.commentCount),"boolean"==typeof n.hasMore&&(P=n.hasMore),n.includesPastPages)Te=s;else if(t){Te=s;for(const e of Oe)E&&E[e._id]||Te.push(e)}else if(Le>0)if(c){Te=[];for(const e of s)E&&E[e._id]||Te.push(e);Te=Te.concat(Oe)}else{Te=Oe;for(const e of s)E&&E[e._id]||Te.push(e)}else Te=s;if(Oe=JSON.parse(JSON.stringify(Te)),k=Te.length,n.moduleData&&(X=FastCommentsUI.moduleData=n.moduleData),n.isWhiteLabeled&&(Z=!0),n.moderatingTenantIds&&(v.moderatingTenantIds=n.moderatingTenantIds),Re&&v.readonly&&0===k&&!Ae.t203)return clearInterval(Qe),a(v.instanceId,0),r(v.instanceId,v),void l(v.instanceId,[]);n.user&&(Pe(n.user),Fe=v.urlId==="__internal_profile:"+n.user.id,d(v.instanceId,"user-set",L)),void 0===D&&(D=!(v.hideCommentsUnderCountTextFormat||v.useShowCommentsToggle));const m=function(e,t,n){const o={},i=n.length,s=[];let a,r;for(r=0;r<i;r++){const e=n[r];o[e._id]=e}for(r=0;r<i;r++){a=n[r],a.nestedChildrenCount=0,
//!commentsById[comment.parentId] check for user profile feed
!e||a.parentId&&o[a.parentId]||void 0!==t[a._id]||(t[a._id]=!0);const i=a.parentId;i&&o[i]?o[i].children?o[i].children.push(a):o[i].children=[a]:s.push(a)}for(r=0;r<i;r++){a=n[r];let e=a.parentId;for(;e&&(a=o[e],a);)a.nestedChildrenCount++,e=a.parentId}return{comments:s,commentsById:o}}(v.collapseReplies,ze,Te);function p(){at(et),v.debugRenderTime&&console.log("FastComments render time",Date.now()-o,"ms"),v.jumpToId&&(fe(v.instanceId,v.jumpToId,200,v.scrollOffset),delete v.jumpToId,"number"==typeof n.pageNumber&&(Le=n.pageNumber)),r(v.instanceId,v),!i&&Re&&null!==n.urlIdWS&&n.tenantIdWS&&n.userIdWS&&(je.presencePollState=n.presencePollState,Ge(n.urlIdWS,n.tenantIdWS,n.userIdWS)),Re&&qe.forEach((function(e){e.onInitialRenderComplete&&e.onInitialRenderComplete()})),Re=!1,Y||(!function(e,t,n,o){setTimeout((function i(){e.querySelectorAll(".comment").forEach((function(e){const i=e.id,s=o[i];if(s){const o=e.querySelectorAll(".jump-link"),i=new Date(s.date),a=i.toLocaleString();o.forEach((function(e){e.innerHTML=C(t,n,i,a)}))}})),setTimeout(i,6e4)}),6e4)}(u,v,Ae,E),Y=!0),l(v.instanceId,n.comments),e&&e()}E=m.commentsById,S=m.comments,qe.forEach((function(e){e.commentsById=E,e.commentsTree=S})),v.jumpToId&&function(e,t,n){let o=n,i=0;for(;o&&i<100&&(i++,delete e[o],t[o]);)o=t[o].parentId}(ze,E,v.jumpToId),J='<span class="fast-comments-waiting">'+Ae.t65+"</span>",K='<span class="fast-comments-waiting">'+Ae.t66+"</span>",$='<span class="fc-red">'+Ae.t67+"</span>",N=n.isSiteAdmin,"boolean"==typeof n.isClosed&&(M=n.isClosed),R=n.hasBillingIssue,H=n.lastGenDate,z=n.isDemo;let f=[];Re&&(N&&f.push(["moderation","/js/comment-ui/extensions/comment-ui.moderation.extension.min.js"]),v.useSingleLineCommentInput&&f.push(["single-line-comment-input","/js/comment-ui/extensions/comment-ui.single-line-comment-input.extension.min.js"]),v.enableWYSIWYG&&f.push(["wysiwyg","/js/comment-ui/extensions/comment-ui.wysiwyg.extension.min.js"]),v.enableVoteList&&f.push(["vote-list","/js/comment-ui/extensions/comment-ui.vote-list.extension.min.js"]),v.hasDarkBackground&&!qe.some((function(e){return"dark"===e.id}))&&(f.push(["dark","/js/comment-ui/extensions/comment-ui.dark.extension.min.js"]),u.classList.add("dark")),v.wrap&&!qe.some((function(e){return"wrapped"===e.id}))&&(f.push(["wrapped","/js/comment-ui/extensions/comment-ui.wrapped.extension.min.js"]),u.classList.add("wrapped")),v.voteStyle&&!qe.some((function(e){return"vote-styles"===e.id}))&&f.push(["vote-styles","/js/comment-ui/extensions/comment-ui.vote-styles.extension.min.js"]),v.enableSearch&&!qe.some((function(e){return"search"===e.id}))&&f.push(["search","/js/comment-ui/extensions/comment-ui.search.extension.min.js"]),v.pageReactConfig&&!qe.some((function(e){return"page-reacts"===e.id}))&&f.push(["page-reacts","/js/comment-ui/extensions/comment-ui.page-reacts.extension.min.js"]),v.enableViewCounts&&!qe.some((function(e){return"view-count"===e.id}))&&f.push(["view-count","/js/comment-ui/extensions/comment-ui.view-count.extension.min.js"]),n.moduleData&&(n.moduleData.autoPlayComments&&!qe.some((function(e){return"autoplay"===e.id}))&&f.push(["autoplay","/js/comment-ui/extensions/comment-ui.autoplay.extension.min.js"]),n.moduleData.questions&&!qe.some((function(e){return"questions"===e.id}))&&f.push(["questions","/js/comment-ui/extensions/comment-ui.questions.extension.min.js"])));let b=f.length;function h(e){g(e),b--,0===b&&p()}if(f.length>0)for(const e of f)Xe(e[0],e[1],!0,h);else p()}),(function(){e&&e()}))}function Ze(e){if(e.broadcastId&&Me.includes(e.broadcastId))return!1;let t=!1;switch(e.type){case"update-badges":for(const t of Te)t.userId===e.userId&&(t.badges=e.badges,rt(t));Me.push(e.broadcastId);break;case"notification":We.count?We.count++:We.count=1,!We.notifications&&v.isDemo&&(We.notifications=[]),We.notifications&&We.notifications.unshift(e.notification),dt();break;case"p-u":if(qe.forEach((function(t){t.onPresenceUpdate&&t.onPresenceUpdate(e)})),e.uj)for(const t of e.uj)U(0,v,Ae,je,E,t,!0);if(e.ul)for(const t of e.ul)U(0,v,Ae,je,E,t,!1);break;case"new-vote":const n=E[e.vote.commentId];n&&(null!==n.votes&&void 0!==n.votes||(n.votes=0),n.votes+=e.vote.direction,e.vote.direction>0?(null!==n.votesUp&&void 0!==n.votesUp||(n.votesUp=0),n.votesUp++,L&&L.id&&e.vote.userId===L.id&&(n.isVotedUp=!0)):(null!==n.votesDown&&void 0!==n.votesDown||(n.votesDown=0),n.votesDown++,L&&L.id&&e.vote.userId===L.id&&(n.isVotedDown=!0)),ct(n));break;case"cvc":for(const t in e.changes){const n=E[t];n&&(n.viewCount?n.viewCount+=e.changes[t]:n.viewCount=e.changes[t],ct(n))}break;case"deleted-vote":const o=E[e.vote.commentId];o&&(o.votes+=-1*e.vote.direction,e.vote.direction>0?(o.votesUp&&o.votesUp--,L&&L.id&&o.isVotedUp&&e.vote.userId===L.id&&delete o.isVotedUp):(o.votesDown&&o.votesDown--,L&&L.id&&o.isVotedDown&&e.vote.userId===L.id&&delete o.isVotedDown),ct(o));break;case"deleted-comment":E[e.comment._id]&&(pt(E[e.comment._id]),t=!0);break;case"new-comment":case"updated-comment":const i=e.comment,s=e.extraInfo,a=v.showLiveRightAway;if("new-comment"===e.type&&E[i._id]){if(E[i._id].approved||!i.approved)return;e.type="updated-comment"}const r=!E[i._id];if(r){if(L&&L.groupIds&&i.groupIds){let e=!1;for(const t of i.groupIds)if(L.groupIds.includes(t)){e=!0;break}if(!e)return}E[i._id]=i}else for(const e in i)E[i._id][e]=i[e];if(r){const e={};A(je,i,e),i.isLive=!0;const n=D&&!a;i.hidden=n;let o=!1,s=null;i.parentId?s=E[i.parentId]:o=!0,B(Te,S,E,i,v.newCommentsToBottom),W(Ae,0,E,ze,i.parentId),nt(i.parentId);const r=document.querySelector(".comments-toggle");if(r&&(r.classList.contains("comments-hidden-title")?r.innerHTML=v.hideCommentsUnderCountTextFormat.replace("[count]",F):r.innerHTML=ie(Ae,D,F)),o)n?mt():t=!0;else if(s){if(n){let e,t=s,n=1e4;for(;t&&!e&&n>0;){if(!t.hidden){e=t;break}if(!t.parentId)break;t=E[t.parentId],1===n&&console.warn("FC ESLOW1"),n--}e?e.hiddenChildrenCount?e.hiddenChildrenCount++:e.hiddenChildrenCount=1:mt()}at((function(){rt(s)}))}qe.length>0&&qe.forEach((e=>{e.newComment&&e.newComment(i)}));const c=Object.keys(e);c.length>0&&setTimeout((function(){!function(e,t,n,o,i,s,a){for(const e of a)i.usersOnlineMap[e]||(i.usersOnlineMap[e]=!0),U(0,t,n,i,s,e)}(0,v,Ae,0,je,E,c)}),1)}else rt(E[i._id],(function(){s&&s.commentPositions&&ft(i._id,s.commentPositions)}));break;case"new-config":Array.prototype.forEach.call(document.querySelectorAll('style,[rel="stylesheet"],[type="text/css"]'),(function(e){try{e.parentNode.removeChild(e)}catch(e){console.error(e)}})),ye(e.config,!0),t=!0;break;case"thread-state-change":M=e.isClosed,t=!0}return t}function tt(e,t){function o(){const n={};for(const t of e)n[t]=!1;t(n)}L&&L.hasBlockedUsers?n(v,"GET","/check-blocked-comments"+T({commentIds:e.join(","),tenantId:Be,sso:De}),null,(function(e){t(e.commentStatuses)}),(function(){o()})):o()}u.addEventListener("keyup",(function(e){if(8===e.keyCode&&"TEXTAREA"===e.target.nodeName&&(e.target.value||(e.target.style.height=q+"px")),(e.metaKey||e.ctrlKey)&&13===e.keyCode)I(e);else if(j(e)){if(13===e.keyCode&&"TEXTAREA"===e.target.nodeName){const t=e.target.scrollHeight,n=e.target.clientHeight;t>n&&n<330&&(q||(q=n),e.target.style.height=t+1+"px")}}else le(v,w,e),ge(v,V,e)})),u.addEventListener("keydown",(function(e){if(j(e))le(v,w,e),ge(v,V,e);else if(e.ctrlKey&&e.key){const t={b:"bold",u:"ul",i:"it",s:"strike",k:"code"}[e.key];if(t){const n=ke(e.target,"data-parent-id");e.preventDefault(),y(t,n)}}})),u.addEventListener("click",(function(e){e.target.className&&e.target.className.split(" ").forEach((function(t){const n=ce[t];n&&n(e)}))})),u.addEventListener("submit",(function(e){e.preventDefault(),e.stopPropagation(),I(e)})),$e()}function et(){const t=function(t,n,o,i,s,a,r,c,d,l,m,p,u,f,b,v,y,I,w,E,S,k,C,T,_,L,N,O,M,A,R,D,U,z,H,F,P,B){let j="";j+='<d class="fast-comments'+(t.readonly?" readonly":"")+(t.useSingleLineCommentInput?" single-line-comment-input":"")+(t.hideAvatars?" hide-avatars":"")+(t.disableImageRedirect?" disable-image-redirect":"")+(1===t.voteStyle?" vote-style-1":"")+(t.newCommentsToBottom?" new-to-bottom":"")+'">';const W=d.length;if(l)j+=g(l);else if(0!==W||!t.readonly||!t.hideCommentsUnderCountTextFormat&&!t.useShowCommentsToggle){s.forEach((e=>{e.widgetTop&&(j+=e.widgetTop(a))})),m&&p&&(j+='<d class="fc-red">'+i.t29+"</d>"),u&&(j+='<d style="display: inline-block; margin: 5px; color: #ff0000">'+i.t30+"</d>");const e=t.hideCommentsUnderCountTextFormat;if("string"!=typeof e||f){j+='<d class="top-area">';let e="";for(const t of s)t.getFilterBarHTML&&(e+=t.getFilterBarHTML());if(!0!==t.inputAfterComments&&0===e.length&&(j+=h(t,i,s,r,0,I,w,E,S,k,L,N,null,M,z,p,B)),t.useShowCommentsToggle&&b>0){if(!f&&t.countAboveToggle&&d.length>0){j+='<d class="comments">';for(let e=0;e<t.countAboveToggle;e++){const n=d[e];T[n._id]=!0,j+=V(t,i,s,r,c,b,w,I,E,S,C,T,_,k,L,N,O,n,p,H,F,B)}j+="</d>"}j+='<d class="comments-toggle toggle-'+(f?"hide":"show")+'-comments">'+ie(i,f,b)+"</d>"}if(f&&(j+=e,v>1)){j+='<div class="select-dir-wrapper">',b&&!t.readonly&&(j+='<div class="comment-count">'+q(t,i,b)+"</div>"),j+='<div class="select-dir'+(t.disableDirSelect?" invisible":"")+'">',j+='<div class="dropdown">';let e="";switch(U){case"OF":e=i.t85;break;case"NF":e=i.t84;break;default:e=i.t83}j+='<div class="drop-label">'+e+" <i>▼</i></div>",j+='<div class="items card goes-black">',t.disableVoting||(j+='<div class="dir-drop-btn" data-value="MR">'+i.t83+"</div>"),j+='<div class="dir-drop-btn" data-value="NF">'+i.t84+"</div>",j+='<div class="dir-drop-btn" data-value="OF">'+i.t85+"</div>",j+="</div>",j+="</div>",j+="</div>",j+="</div>"}f&&(j+='<d id="new-comments-message-root" data-comment-id="null" class="new-comments-message'+(y?"":" hidden")+'">'+x(i,y)+"</d>"),j+="</d>";let n="";if(!t.enableInfiniteScrolling&&P){const e=b?Math.min(Math.max(b-v,0),t.pageSize):t.pageSize;n='<d class="pagination pagination-next"><d class="load-next-page">'+i.t34.replace("[count]",e+"")+"</d>",b<2e3&&(n+='<d class="load-all">'+G(i.t35,b)+"</d>"),n+="</d>"}if(s.forEach((e=>{e.beforeComments&&(j+=e.beforeComments())})),f){const e=!!i.t203;0===W&&e&&(j+='<div class="no-comments">'+i.t203+"</div>"),j+='<d class="comments">',t.paginationBeforeComments?j+=n:A>0&&!R.includes(A-1)&&(j+='<d class="pagination pagination-prev"><d class="load-prev-page">'+i.t160.replace("[count]",t.pageSize)+"</d></d>");for(let e=0;e<W;e++){const n=d[e];!0!==n.hidden&&(j+=V(t,i,s,r,c,b,w,I,E,S,C,T,_,k,L,N,O,n,p,H,F,B))}j+="</d>",t.paginationBeforeComments||(j+=n)}!0===t.inputAfterComments&&0===e.length&&(j+=h(t,i,s,r,0,I,w,E,S,k,L,N,null,M,z,p,B))}else j+='<d class="comments-toggle toggle-show-comments comments-hidden-title">'+e.replace("[count]",b)+"</d>"}return j+='<d class="footer'+(o?" empty":"")+'">',o||(j+='<a href="'+e+'" target="_blank"><i class="icon logo"></i>'+i.t70+"</a>"),j+="</d>",j+="</d>",t.noStyles||(j+=n,s.length>0&&s.forEach((e=>{e.css&&(j+=e.css)}))),t.customCSS&&(j+="<style>"+t.customCSS+"</style>"),s.forEach((e=>{e.widgetFilter&&(j=e.widgetFilter(a?a.reviews:null,j))})),j}(v,y,Z,Ae,qe,X,L,je,S,ee,R,N,z,D,F,k,_e,de,Ce,be,me,E,ue,ze,pe,$,K,J,He,Le,Ne,0,Ue,We.count,Fe,Date.now(),P,M);if(u.innerHTML){const e=document.createElement("d");e.innerHTML=t;const n=document.createElement("div");n.id=u.id,n.classList=u.classList,n.append(e),Q(u,n)}else u.innerHTML="<d>"+t+"</d>";!function(e,t,n,o,i,s,a,r){r&&(ye&&r.removeEventListener("scroll",ye),Ie&&r.removeEventListener("mousemove",Ie),ye=function(){he()},Ie=function(r){if(r.target)if(window.fcFloatingMenus.length>0)r.target.closest(".menu-btn")||r.target.closest(".menu-content")||he();else if(r.target.classList.contains("menu-btn")){const c=r.target.closest(".comment");if(!c)return;const d=a[c.id];if(!d)return;if(r.target.parentNode.classList.contains("empty"))return;xe(e,t,n,o,i,s,r.target,d)}},r.addEventListener("scroll",ye),r.addEventListener("mousemove",Ie),r.addEventListener("touchend",Ie))}(v,Ae,qe,L,N,Fe,E,u.querySelector(".comments")),Ye(),st(),s(v.instanceId,F)}function tt(){const e=document.querySelector(".comment-count");e&&(e.innerHTML=q(v,Ae,F));const t=document.querySelector(".pagination .load-all");t&&(t.innerHTML=G(Ae.t35,F))}function nt(e){(!e||e&&v.countAll)&&(F++,s(v.instanceId,F),tt())}function ot(){{const e=document.querySelectorAll(".comment-input");if(!e)return;for(const t of e){const e=t.clientWidth,n=t.querySelector(".horizontal-border-left");if(n){const o=t.querySelector(".reply-button-wrapper"),i=2*parseInt(getComputedStyle(t).paddingLeft.replace("px",""),10);n.style.width=o?e-o.clientWidth-i-34+"px":e-i-20+"px";const s=t.querySelector(".cancel-button-wrapper"),a=t.querySelector(".horizontal-border-top-left");s&&a&&(a.style.width=e-s.clientWidth-30+"px")}}}}function it(){const e=Math.max(u.offsetHeight,u.clientHeight,u.scrollHeight);a(v.instanceId,e+(v.ignoreCommentMenuHeight?0:function(e){const t=document.querySelector(".menu-content");if(t){const n=t.getBoundingClientRect().bottom+15;if(n>e)return n-e}return 0}(e))+(v.wrap?30:0))}function st(){it(),ot()}function at(e){const t={};let n;u.querySelectorAll("[data-restore-id]").forEach((function(e){const o=e.attributes.getNamedItem("data-restore-id").value;e.attributes.contenteditable?t[o]=e.innerHTML:e.value&&(t[o]=e.value),e===document.activeElement&&(n=o)})),e(),u.querySelectorAll("[data-restore-id]").forEach((function(e){const o=e.attributes.getNamedItem("data-restore-id").value,i=t[o];i&&(e.attributes.contenteditable?e.innerHTML=i:e.value=i),n===o&&e.focus()}))}function rt(e,t){const n=Ee(e._id);at((function(){n&&(n.outerHTML=V(v,Ae,qe,L,je,F,Ce,de,be,me,ue,ze,pe,E,$,K,J,e,N,Fe,Date.now(),M),function(e,t,n,o,i,s,a){for(const r of window.fcFloatingMenus)r.commentId===a._id&&(r.innerHTML=w(e,t,n,o,i,s,a))}(v,Ae,qe,L,N,Fe,e)),st(),t&&t()})),Ye()}function ct(e){at((function(){const t=Ee(e._id);t&&(t.querySelector(".comment-toolbar-vote").innerHTML=I(v,Ae,ue,0,J,$,e,Ce[e._id])),st()})),Ye()}function dt(){at((function(){const e=u.querySelector(".notification-bell");e&&(e.outerHTML=f(v,We.count));const t=u.querySelector(".notifications");if(t){const e=document.createElement("d");e.innerHTML=b(qe,!0);const n=document.createElement("d");n.classList=t.classList,n.append(e),Q(t,n)}st()})),Ye()}function lt(e){at((function(){const t=null===e||Ce[e]?h(v,Ae,qe,L,0,de,Ce,be,me,E,$,K,e,!1,e?null:We.count,N,M):"";if(e?Ee(e).querySelector(".reply-form-wrapper").innerHTML=t:u.querySelector(".comment-reply.root").outerHTML=t,e){const t=Ee(e).querySelector(".comment-reply-start > i");t&&(Ce[e]?(t.classList.remove("reply-arrow-inactive"),t.classList.add("reply-arrow-active")):(t.classList.add("reply-arrow-inactive"),t.classList.remove("reply-arrow-active")))}st()})),Ye()}function mt(){_e++;const e=Ee("new-comments-message-root");e&&(e.classList.remove("hidden"),e.innerHTML=x(Ae,_e))}function pt(e){var t;!function(e,t,n,o){const i=e.indexOf(o);if(i>-1&&e.splice(i,1),o.parentId&&n[o.parentId]){const e=n[o.parentId].children;if(e){const t=e.indexOf(o);t>-1&&e.splice(t,1)}}else{const e=t.indexOf(o);e>-1&&t.splice(e,1)}delete n[o._id],j(n,o.parentId,-1)}(Te,S,E,e),W(Ae,0,E,ze,e.parentId),(!(t=e.parentId)||t&&v.countAll)&&(F=Math.max(F-1,0),s(v.instanceId,F),tt()),e.hidden&&e.isLive&&!e.parentId&&function(){_e=Math.max(_e-1,0);const e=Ee("new-comments-message-root");e&&(e.classList.remove("hidden"),e.innerHTML=x(Ae,_e))}()}function ut(e){pt(e),et()}function gt(){const e=function(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}();return Me.push(e),e}function ft(e,t){const n=Ue||"MR",o=t[n].before,i=t[n].after;let s,a;for(let t=0;t<S.length;t++)if(S[t]._id===e){s=t;break}s>-1&&S.splice(s,1);for(let e=0;e<S.length;e++){if(S[e]._id===o){a=e+1;break}if(S[e]._id===i){a=Math.max(e-1,0);break}}S.splice(a,0,E[e]);const r=document.getElementById(e);if(o){const e=document.getElementById(o);e&&e.parentNode.insertBefore(r,e.nextSibling)}else if(i){const e=document.getElementById(i);e&&e.parentNode.insertBefore(r,e)}}window.addEventListener("resize",ot),window.addEventListener("message",(function(e){if(e.data)try{const t=JSON.parse(e.data);if(t.instanceId!==v.instanceId)return;"update-user"===t.type?JSON.stringify(L)!==JSON.stringify(t.user)&&(Pe(t.user),at(et)):"update-config"===t.type?(v[t.k]=t.v,v.hasDarkBackground?(u.classList.add("dark"),qe.some((function(e){return"dark"===e.id}))?et():Xe("dark","/js/comment-ui/extensions/comment-ui.dark.extension.min.js",!0,(function(){et()}))):(u.classList.remove("dark"),et())):"click-outside"===t.type?(he(),qe.forEach((function(e){e.onClickOutside&&e.onClickOutside()}))):"on-c-s-continue"===t.type?ne():"on-c-s-cancel"===t.type?se(t.m):"profile-loaded"===t.type?te&&te.classList.remove("animated-background"):"session-info"===t.type&&alert(JSON.stringify(t))}catch(t){v.apiHost&&console.error(e,t)}}),!1)}window.FastCommentsUI=function(e,t){return Ce(e,t,'<style>body { margin: 0; padding: 0; }d { display: block }@keyframes pop-in { 0% { transform: scale(0.3); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }@keyframes placeHolderShimmer { 0% { background-position: 0 0 } 100% { background-position: 100% 0 } }.comment-reply .comment-input.animated-background, .comment-reply input.animated-background, .animated-background { animation-duration: 1s; animation-iteration-count: infinite; animation-name: placeHolderShimmer; background: #f6f7f8; background: linear-gradient(to right, #eee 8%, #dddddd 18%, #eee 33%); background-size: 50% 50%; }@keyframes backgroundToNormal { from { background: lightblue } to { background: inherit } }.fast-comments { position: relative; width: 100%; font-size: 13px }.hidden { display: none }.invisible { visibility: hidden }.inline-block { display: inline-block }.icon { display: inline-block; width: 24px; height: 24px; vertical-align: middle; image-rendering: -webkit-optimize-contrast; }.icon.bubble { background: url("https://cdn.fastcomments.com/images/svg/v2/text_bubble_dark.svg") no-repeat center; background-size: 22px 22px; }.icon.bubble-white { background: url("https://cdn.fastcomments.com/images/svg/v2/text_bubble_white.svg") no-repeat center; background-size: 22px 22px; }.icon.cross { background: url("https://cdn.fastcomments.com/images/svg/v2/close.svg") no-repeat center; background-size: 9px 9px; }.icon.reply-arrow-inactive { background: url("https://cdn.fastcomments.com/images/svg/v2/reply_inactive.svg") no-repeat center; background-size: 15px 15px; }.icon.reply-arrow-active { background: url("https://cdn.fastcomments.com/images/svg/v2/reply.svg") no-repeat center; background-size: 15px 15px; }.icon.up { background: url("https://cdn.fastcomments.com/images/svg/v2/thumbs_up_light.svg") no-repeat center; background-size: 12px 12px; }.icon.up.active, .icon.up:hover { background: url("https://cdn.fastcomments.com/images/svg/v2/thumbs_up_dark.svg") no-repeat center; background-size: 12px 12px; }.icon.down { background: url("https://cdn.fastcomments.com/images/svg/v2/thumbs_down_light.svg") no-repeat center; background-size: 12px 12px; }.icon.down.active, .icon.down:hover { background: url("https://cdn.fastcomments.com/images/svg/v2/thumbs_down_dark.svg") no-repeat center; background-size: 12px 12px; }.icon.pin-small { background: url("https://cdn.fastcomments.com/images/svg/v2/pin.svg") no-repeat center; background-size: 15px 15px; }.icon.logo { width: 27px; height: 33px; background: url("https://cdn.fastcomments.com/images/svg/v2/logo.svg") no-repeat center; background-size: 22px;  }.icon.edit-small { background: url("/images/svg/menu.svg") no-repeat center; background-size: 17px 17px; }.icon.edit-big { background: url("https://cdn.fastcomments.com/images/svg/v2/edit.svg") no-repeat center; background-size: 22px 22px; }.icon.trash { background: url("https://cdn.fastcomments.com/images/svg/v2/trash_thin.svg") no-repeat center; background-size: 22px 22px; }.icon.eye { background: url("https://cdn.fastcomments.com/images/svg/v2/view.svg") no-repeat center; background-size: 22px 22px; }.icon.eye-slash { background: url("https://cdn.fastcomments.com/images/svg/v2/view_hide.svg") no-repeat center; background-size: 22px 22px; }.icon.replied { background: url("https://cdn.fastcomments.com/images/svg/v2/replied.svg") no-repeat center; background-size: 22px 22px; }.icon.bold { background: url("https://cdn.fastcomments.com/images/svg/v2/editor_bold.svg") no-repeat center; background-size: 9px; }.icon.ul { position: relative; top: 1px; background: url("https://cdn.fastcomments.com/images/svg/v2/editor_underline.svg") no-repeat center; background-size: 10px; }.icon.it { background: url("https://cdn.fastcomments.com/images/svg/v2/editor_itallic.svg") no-repeat center; background-size: 7px; }.icon.s { background: url("https://cdn.fastcomments.com/images/svg/v2/editor_strike.svg") no-repeat center; background-size: 10px; }.icon.code { background: url("https://cdn.fastcomments.com/images/svg/v2/editor_embed.svg") no-repeat center; background-size: 16px; }.icon.link { position: relative; top: -1px; background: url("https://cdn.fastcomments.com/images/svg/v2/editor_link.svg") no-repeat center; background-size: 14px; }.icon.img-up { background: url("https://cdn.fastcomments.com/images/svg/v2/editor_image.svg") no-repeat center; background-size: 16px; }.icon.img-btn-wrap { position: relative; }.icon.return { background: url("/images/svg/return.svg") no-repeat center; background-size: 22px; margin-left: 6px; }.icon.gif { width: auto; height: auto; font-size: 0; }.icon.gif::before { content: "GIF"; font-size: 12px; }.icon.gif::before, .t-btn.txt { display: inline-block; width: auto; height: auto; margin-right: 3px; text-align: center; vertical-align: middle; font-weight: 500; }.icon.bell { background: url("data:image/svg+xml;utf8,%3Csvg%20viewBox%3D%220%200%2024%2024%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22m13.5%204.18c-.276%200-.5-.224-.5-.5v-1.68c0-.551-.449-1-1-1s-1%20.449-1%201v1.68c0%20.276-.224.5-.5.5s-.5-.223-.5-.5v-1.68c0-1.103.897-2%202-2s2%20.897%202%202v1.68c0%20.277-.224.5-.5.5z%22%2F%3E%3Cpath%20d%3D%22m12%2024c-1.93%200-3.5-1.57-3.5-3.5%200-.276.224-.5.5-.5s.5.224.5.5c0%201.378%201.122%202.5%202.5%202.5s2.5-1.122%202.5-2.5c0-.276.224-.5.5-.5s.5.224.5.5c0%201.93-1.57%203.5-3.5%203.5z%22%2F%3E%3Cpath%20d%3D%22m20.5%2021h-17c-.827%200-1.5-.673-1.5-1.5%200-.439.191-.854.525-1.14%201.576-1.332%202.475-3.27%202.475-5.322v-3.038c0-3.86%203.14-7%207-7%203.86%200%207%203.14%207%207v3.038c0%202.053.899%203.99%202.467%205.315.342.293.533.708.533%201.147%200%20.827-.672%201.5-1.5%201.5zm-8.5-17c-3.309%200-6%202.691-6%206v3.038c0%202.348-1.028%204.563-2.821%206.079-.115.098-.179.237-.179.383%200%20.276.224.5.5.5h17c.276%200%20.5-.224.5-.5%200-.146-.064-.285-.175-.38-1.796-1.519-2.825-3.735-2.825-6.082v-3.038c0-3.309-2.691-6-6-6z%22%2F%3E%3C%2Fsvg%3E") no-repeat center; background-size: 22px; }.icon.bell-red { background: url("https://cdn.fastcomments.com/images/svg/v2/bell-red.svg") no-repeat center; background-size: 22px; }.divider { display: inline-block; height: 25px; margin: 0 10px; vertical-align: middle; border-right: 1px solid #c2c2c2; }.icon.block { background: url("https://cdn.fastcomments.com/images/svg/v2/ban.svg") no-repeat; background-size: 22px 22px; }.icon.flag { background: url("/images/svg/flag.svg") no-repeat; background-size: 22px 22px; }.icon.flag-small { background: url("/images/svg/flag.svg") no-repeat center; background-size: 15px 15px; }.select-dir-wrapper { clear: both; text-align: right; border-bottom: 1px solid #afafaf; }.select-dir-wrapper .comment-count { float: left; font-weight: 500; }.select-dir-wrapper > * { margin: 9px; height: 16px }.select-dir { display: inline-block }.dropdown { position: relative; z-index: 3; text-align: right }.dropdown .drop-label { padding: 0 0 7px 0; cursor: pointer; font-weight: 500 }.dropdown .drop-label i { position: relative; display: inline-block; top: -2px; font-size: 7px }.dropdown .items { position: absolute; display: none; top: 20px; right: 0; width: 150px; overflow: hidden; border-radius: 0 0 4px 4px; background: #fff; }.dropdown:hover .items { position: absolute; display: block }.dropdown .items > * { padding: 5px 9px; cursor: pointer; font-weight: 500; text-align: left; font-size: 13px }.no-comments { clear: both; text-align: center; font-weight: 500; font-size: 16px; }.new-comments-message { width: fit-content; margin: 20px auto 0; padding: 5px 10px; text-align: center; cursor: pointer; font-weight: 500 }.new-comments-message .new-comments-count { pointer-events: none; position: relative; top: 1px; display: inline-block; min-width: 12px; padding: 2px 5px 4px 5px; margin-right: 3px; border: 1px solid #a2a2a2; border-radius: 4px 0 4px 4px; }.new-comments-message span { pointer-events: none; padding-bottom: 2px; border-bottom: 1px solid #a3a3a3; }.comment .new-comments-message { margin: 10px auto 0; }.sso-login-wrapper, .fastcomments-message-wrapper { display: flex; height: fit-content; min-height: 130px; padding: 30px 0; box-sizing: border-box; align-items: center; justify-content: center; border: 1px solid #bfbfbf; border-radius: 0 11px 11px 11px; }.sso-login-wrapper .message-text, .fastcomments-message-wrapper .message-text { display: inline; pointer-events: none; }.fastcomments-message-wrapper .message-text a { color: #fff; pointer-events: all; }.sso-login-wrapper .sso-login, .fastcomments-message-wrapper .fastcomments-message { display: inline-block; animation: pop-in 0.5s; animation-timing-function: ease; padding: 10px 17px 10px 27px; border-radius: 0 7px 7px 7px; background: #333; color: #fff; text-decoration: none; font-size: 17px; font-weight: 500; }.fastcomments-message-wrapper .fastcomments-message { margin: 0 5%; cursor: default; }.sso-login-wrapper .sso-login[href] { cursor: pointer; }.sso-login-wrapper .sso-login .message-text, .fastcomments-message-wrapper .fastcomments-message .message-text { margin-right: 10px; }.sso-login-wrapper .sso-login .icon, .fastcomments-message-wrapper .fastcomments-message .icon { pointer-events: none; }.sso-login-wrapper .sso-login.clickable { cursor: pointer; }.comment .sso-login-wrapper { padding: 7px 0; text-align: left }.comment .sso-login-wrapper .sso-login { font-size: 16px }.default-hidden { transition-duration: 300ms }.comment-input:not(.show-default-hidden) .default-hidden { height: 0; margin: 0 !important; opacity: 0; pointer-events: none; transition-duration: 200ms }.loading .pagination { opacity: 0.5; pointer-events: none; }.card { border: 1px solid #d0d0d0; background: #fdfdfd; border-radius: 3px; box-shadow: 5px 5px 7px rgba(0,0,0,.1) }button, .button { display: inline-block; margin-bottom: 10px; padding: 4px 10px; border-radius: 0 7px 7px 7px; font-size: 15px; background: #fbfbfb; color: #333; text-decoration: none; border: 1px solid #a2a2a2; cursor: pointer }.fast-comments, textarea { font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif }textarea::placeholder { font-size: 13px; font-weight: 500; transition-duration: 150ms }textarea:focus::placeholder { color: transparent }.fc-red { display: inline-block; margin: 5px; color: #ff0000 }.comment-error { padding: 10px }input, textarea { padding: 12px 20px; border: 1px solid #bfbfbf; border-radius: 0 11px 11px 11px; box-sizing: border-box; outline: none; background: transparent; }input { padding: 9px 12px; border-radius: 0 6px 6px 6px; }input:focus, textarea:focus, textarea:focus + .horizontal-border-wrapper, .comment-input textarea:focus { border-color: #555 }.pagination { margin-top: 50px; line-height: 19px; text-align: center; user-select: none; }.pagination > * { display: inline-block; cursor: pointer; font-weight: 700; }.pagination > * > span { font-weight: normal; pointer-events: none; }.pagination > * > span::before { content: "("; }.pagination > * > span::after { content: ")"; }.pagination .load-next-page { padding-right: 25px; }.pagination .load-all { padding-left: 25px; border-left: 2px solid #555; }.comments-toggle { display: block; width: fit-content; margin: 20px auto; cursor: pointer; padding: 10px 17px 10px 27px; border-radius: 7px; background: #333; color: #fff; text-decoration: none; font-size: 17px; font-weight: 500; user-select: none; }.replying-to { margin-bottom: 5px }.comment-reply { position: relative; width: 100%; margin: 10px 0 15px 0; }.comment-reply.root { padding: 15px; box-sizing: border-box; }@media(max-width: 500px) { .comment-reply.root { padding: 15px 5px 15px 5px; } }.comment-reply .fast-comments-waiting { display: block; margin: 5px 0 }.comment-reply .comment-reply-top-bar { position: relative; min-height: 25px; margin: 0 26px 15px 26px; line-height: 25px; }.comment-reply .comment-reply-top-bar .logged-in-info { display: inline-block; width: calc(100% - 60px); min-width: 150px; }.comment-reply .comment-reply-top-bar .logged-in-info .avatar { display: inline-block; height: 25px; vertical-align: middle; margin-right: 5px; border-radius: 25px; overflow: hidden; box-shadow: 3px 3px 3px 0 rgba(0, 0, 0, 0.07); font-size: 0; }.comment-reply .comment-reply-top-bar .logged-in-info .avatar .open-profile { cursor: pointer; }.comment-reply .comment-reply-top-bar .logged-in-info .avatar.animated-background img { opacity: 0.1; }.comment-reply .comment-reply-top-bar .logged-in-info .avatar img { width: 25px; height: 25px; object-fit: cover; }.comment-reply .comment-reply-top-bar .logged-in-info .username { display: inline-block; max-width: calc(50% - 25px); overflow: hidden; vertical-align: middle; text-overflow: ellipsis; font-weight: 700; white-space: nowrap; }.comment-reply .comment-reply-top-bar .right { float: right; }.comment-reply .comment-reply-top-bar .right > * { display: inline-block; }.comment-reply .comment-reply-top-bar .right .menu { font-weight: 500; font-size: 11px; }.comment-reply .comment-reply-top-bar .right .menu:hover { z-index: 9002; }.comment-reply .comment-reply-top-bar .right .menu .drop-label i { display: inline-block; width: 4px; height: 4px; background: #333; border-radius: 4px; margin: 0 2px; }.comment-reply .comment-reply-top-bar .right .menu .items { top: 25px; padding: 20px; box-shadow: 2px 3px 6px rgba(0, 0, 0, 0.1); border-radius: 10px 0 10px 10px; }.comment-reply .comment-reply-top-bar .right .menu .items > * { font-weight: 700; }.comment-reply .comment-reply-top-bar .right .notification-bell { position: relative; margin-left: 5px; cursor: pointer; }.comment-reply .comment-reply-top-bar .right .notification-bell .count { position: absolute; top: -3px; left: 19px; min-width: 15px; height: 15px; text-align: center; font-size: 11px; pointer-events: none; color: red; display: none; }.comment-reply .comment-reply-top-bar .right .notification-bell .icon.bell-red { display: none; }.comment-reply .comment-reply-top-bar .right .notification-bell > * { pointer-events: none; }.comment-reply .comment-reply-top-bar .right .notification-bell.has-notifications .icon.bell { display: none; }.comment-reply .comment-reply-top-bar .right .notification-bell.has-notifications .icon.bell-red { display: inline-block; }.comment-reply .comment-reply-top-bar .right .notification-bell.has-notifications .count { display: block; }.toolbar { position: relative; display: inline-block; margin: 5px 0 0 0; font-size: 13px }.toolbar .t-btn { display: inline-block; margin: 0 1px; vertical-align: middle; cursor: pointer; transition-duration: 200ms; user-select: none; }.toolbar .t-btn:hover { opacity: 0.7; }.toolbar .img-btn-wrap { display: inline-block; overflow: hidden }.toolbar .t-btn input[type=file] { position: absolute; padding: 40px; font-size: 100px; top: 0; left: 0; opacity: 0; cursor: pointer }.commenty-input:not(.show-default-hidden) .toolbar { width: 100%; margin-top: -50px; }@media(max-width: 500px) { .toolbar { display: flex; width: 100%; padding-bottom: 12px; justify-content: space-evenly; } }@media(max-width: 500px) { .comment-input .toolbar { margin-top: 50px; border-bottom: 1px solid #bfbfbf; } }.comment-reply .auth-input, .comment-vote-auth.auth-input { margin: 10px 0; font-size: 13px }.comment-reply .auth-input .fc-login { margin: 10px 0 0; }.comment-reply .auth-input .reasoning, .comment-vote-auth.auth-input .reasoning { font-weight: 600; }.comment-reply .auth-input .fc-red, .comment-vote-auth.auth-input .fc-red { display: block }.comment-reply .auth-input input, .comment-vote-auth.auth-input input { width: 100%; margin-top: 10px; padding: 9px 12px; border-radius: 0 6px 6px 6px; font-size: 14px; border: 1px solid #a2a2a2; }.comment-reply .auth-input .solicitation-info, .comment-vote-auth.auth-input .solicitation-info { margin-top: 10px; }.comment-reply .auth-input .fast-comments-reply { margin-top: 10px; padding: 10px 45px; border-radius: 5px 0 5px 5px; background: #333; color: #fff; border: none; }.comment-input, .comment-edit { position: relative; padding-bottom: 30px; border-radius: 0 11px 11px 11px; }.comment-input textarea { display: block; width: 100%; height: 130px; padding: 15px 25px 15px 15px; resize: none; font-size: 16px; border-bottom: none; border-radius: 0 11px 0 0; }.comment-input textarea::placeholder { font-size: 16px; font-weight: 400; }.comment-input input { display: block; width: 100%; font-size: 14px; }.comment-input .fastcomments-message-wrapper { border: 1px solid #bfbfbf; border-bottom: none; border-radius: 0 11px 0 0; }.comment-input input[name=fastcomments-link] { display: block; width: 100%; margin: 10px 0; }.comment-input .horizontal-border-wrapper { pointer-events: none; border-color: #bfbfbf; }.comment-input .horizontal-border { position: absolute; height: 20px; border-bottom: 1px solid; border-color: inherit; }.comment-input .horizontal-border-left { bottom: 0; left: 0; border-radius: 0 0 0 11px; }.comment-input .horizontal-border-right { bottom: 0; right: 0; width: 20px; border-radius: 0 0 11px 0; }.comment-input .horizontal-border-top-left, .comment-input .horizontal-border-top-right { display: none; position: absolute; top: 20px; border-bottom: 0; border-top: 1px solid; border-color: inherit; }.comment-input .horizontal-border-top-right { top: 0; right: 0; border-radius: 0 11px 0 0; width: 20px; }.comment-input .horizontal-border-top-left { top: 0; left: 0; }.comment-input .horizontal-border-bottom-left { position: absolute; height: 30px; width: 15px; left: 0; bottom: 0; border-color: inherit; border-left-width: 1px; border-left-style: solid; border-radius: 0 0 0 11px; }.comment-input .horizontal-border-bottom-right { position: absolute; height: 30px; width: 15px; right: 0; bottom: 0; border-color: inherit; border-right-width: 1px; border-right-style: solid; border-radius: 0 0 11px 0; }.comment .comment-input .horizontal-border-top-left, .comment .comment-input .horizontal-border-top-right { display: block }@media(max-width: 500px) { .comment-input textarea, .comment-input .fastcomments-message-wrapper { height: 130px;  } }.comment .reply-button-wrapper { position: relative; float: right; top: -19px; right: 26px; border-radius: 0 7px 7px 7px; }.comment .fast-comments-reply, .comment .edit-save { padding: 10px 27px; border-radius: 0 7px 7px 7px; background: #333; color: #fff; text-decoration: none; }.comment .cancel-button-wrapper { position: absolute; top: 9px; right: 25px; border-radius: 4px; }.comment .comment-edit .cancel-button-wrapper { top: -13px }.comment .fast-comments-reply-cancel { margin-bottom: 0; padding: 1px 1px; border-radius: 4px; }.comment .fast-comments-reply-cancel .cross { pointer-events: none; }.comment-reply.root .reply-button-wrapper { position: relative; float: right; top: -20px; right: 27px; margin-bottom: 10px; border-radius: 0 7px 7px 7px; }.comment-reply.root button { margin-bottom: 0; padding: 7px 20px; font-weight: 600; }.comment-reply.root button .bubble { margin-left: 10px; pointer-events: none; }.comments { clear: both; padding: 15px 0; }@media(max-width: 500px) { .comments { padding: 15px 5px; } }.comment { position: relative; margin-top: 15px }@media(max-width: 500px) { .comment { margin-top: 5px; } }.comment .comment-text spoiler:not(:hover) { background: #eee; color: #eee; border: 1px dotted #a2a2a2; }.comment .comment-text .inline-image { display: block; max-width: 500px; margin: 3px 0 3px 0 }.comment .comment-text .inline-image img { max-width: 100%; max-height: 400px }.disable-image-redirect .comment .inline-image { cursor: default; }.comment.is-live > .inner { animation: backgroundToNormal 1.5s }.comment.is-unread > .inner .avatar-wrapper { box-shadow: 0 0 20px #89f796; }.comment.unverified > .commenter-name, .comment.unverified > .comment-content .commenter-name { opacity: 0.7 }.comment.unverified > .comment-content > .comment-text { opacity: 0.7 }.comment.is-spam > .comment-content { border: 1px solid red; }.comment.is-unapproved > .comment-content { border: 1px solid #ffa700; }.comment.is-blocked > .inner > .comment-content > .comment-text { max-height: 40px; overflow: hidden; }.comment > .requires-verification-approval { margin: 3px 0 6px }.comment > .inner > .spam-notice { margin: 0 0 10px 0; font-size: 12px; color: red }@media(max-width: 500px) { .comment > .inner > .spam-notice { margin-top: 18px; } }.comment .avatar-wrapper { position: relative; display: inline-block; width: 56px; height: 56px; overflow: hidden; box-shadow: 3px 3px 5px 0 rgba(0, 0, 0, 0.10); border-radius: 15px 0 15px 15px; vertical-align: top; }.comment .avatar-wrapper.anon { border: 1px solid #3f3f3f; }.comment .avatar-wrapper .open-profile { cursor: pointer; }.comment .avatar-wrapper.animated-background img { opacity: 0.1; }@media(max-width: 500px) { .comment .avatar-wrapper { width: 36px; height: 36px; } }.comment .avatar { width: 100%; height: 100%; object-fit: cover; }@media(max-width: 500px) { .comment .avatar { vertical-align: middle } }.comment .commenter-name .badges { margin-bottom: 5px; }.comment .commenter-name .badges .badge { display: inline-block; vertical-align: middle; margin: 3px 5px 3px 0; padding: 5px 7px; cursor: default; font-size: 12px; white-space: nowrap; border-radius: 4px; color: #000; }.comment .commenter-name .badges .badge img { max-width: 22px; }.comment .commenter-name .badges .badge.ib { padding: 0; }.comment .commenter-name { font-size: 14px }.comment > .commenter-name { display: none; vertical-align: middle; color: #000 }@media(max-width: 500px) { .comment > .commenter-name { display: inline-block; margin-left: 5px; vertical-align: middle } }.comment > .commenter-name a { display: block; color: #000; text-decoration: none }.comment .commenter-name .website-url { color: #000; text-decoration: underline }.comment .commenter-name .label { font-size: 10px; text-transform: uppercase; font-weight: 500; color: #666666; }.comment > .inner { position: relative; padding: 8px 8px 10px 8px; }@media(max-width: 500px) { .comment > .inner { padding: 5px 5px 5px 5px; } }.comment > .inner > .comment-content { position: relative; display: inline-block; width: calc(99% - 101px); margin-left: 15px; }.hide-avatars .comment > .inner > .comment-content { margin-left: 0; }.hide-avatars .comments > .comment > .inner > .comment-content > .commenter-name, .hide-avatars .comments > .comment > .inner > .comment-content > .comment-text { padding-left: 0; }@media(max-width: 500px) { .comment > .inner > .comment-content { display: inline; margin-left: 3px; background: transparent } }.comment > .inner > .comment-content .commenter-name { display: inline-block; max-width: 50%; vertical-align: middle; padding: 5px 0 0 2px; color: #171717 }.comment > .inner > .comment-content .commenter-name > .username { display: block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }@media(max-width: 500px) { .comment > .inner > .comment-content .commenter-name { padding: 5px 0 0 4px; } }.comment > .inner > .comment-content .comment-text { padding: 5px 2px; color: #000; line-height: 22px; font-size: 14px; word-break: break-word; white-space: pre-line; overflow-y: auto }.comment > .inner > .comment-content .comment-text ol, .comment > .inner > .comment-content .comment-text ul { white-space: normal; }.comment > .inner > .comment-content .comment-text .react { display: inline; max-height: 20px; margin: 0 3px; vertical-align: text-top; }.comment > .inner > .comment-content > .comment-text b > a { color: #000; text-decoration: none; }.comment > .inner > .comment-content > .comment-text blockquote { margin: 15px 0; padding: 0 20px; border-left: 1px solid #e5e5e5; }.comment > .inner > .comment-content .comment-text-edit { width: 100%; margin-top: 15px; }@media(max-width: 500px) { .comment > .children .comment-text { margin-left: 27px; } }.comment > .inner > .comment-content .comment-text br { line-height: 0.5em }.comment > .inner > .comment-content textarea.comment-text, .comment > .inner > .comment-content input.comment-text { display: block; width: calc(100% - 20px); height: fit-content; margin: 10px 10px 0 10px; padding: 5px 11px; resize: vertical }.comment > .inner > .comment-content .edit-failure { display: block; margin: 10px 0; text-align: center }.comment > .inner > .comment-content .comment-toolbar-vote { position: relative; margin-left: 8px }@media(max-width: 500px) { .comment > .inner > .comment-content .comment-toolbar-vote { margin-left: 0 } }.comment > .inner > .comment-content .comment-toolbar-vote .vote-awaiting-verification { padding: 5px 0; font-weight: 500 }.comment > .inner > .comment-bottom { margin-top: 25px; border-bottom: 1px solid #e5e5e5; }@media(max-width: 500px) { .comment > .inner > .comment-bottom { margin-top: 10px; } }.children .comment > .inner > .comment-bottom { margin-left: 28px; }@media(max-width: 500px) { .children .comment > .inner > .comment-bottom { margin-left: 21px; } }@media(min-width: 500px) { .hide-avatars .children .comment > .inner > .comment-bottom { margin-left: 33px; } }.comment > .inner > .comment-bottom > .comment-bottom-toolbar { position: relative; min-height: 36px; }.comment > .inner > .comment-bottom .comment-vote-options .votes-up, .comment > .inner > .comment-bottom .comment-vote-options .votes-down { position: relative; top: 1px; vertical-align: middle; font-size: 12px; font-weight: 500; }.comment > .inner > .comment-bottom .comment-vote-options .votes-up { margin-right: 5px; }.comment > .inner > .comment-bottom .comment-vote-options .votes-down { margin-left: 5px; }.comment > .inner > .comment-bottom .comment-toolbar-vote .comment-votes .divider { height: 20px; }.comment > .inner > .comment-bottom .comment-vote-options { display: inline-block; margin: 0 7px 0 2px; font-size: 12px; }.comment > .inner > .comment-bottom .comment-vote-options > span { cursor: pointer }.comment > .inner > .comment-bottom .comment-votes, .comment > .inner > .comment-bottom .comment-reply-start { display: inline-block; margin: 5px 2px; font-size: 12px }.comment > .inner > .comment-bottom .comment-vote-options button { margin: 0 3px }.comment > .inner > .comment-bottom .comment-vote-options .view-count { display: inline-flex; align-items: center; vertical-align: middle; gap: 3px; margin-left: 3px; color: #828282; }.comment > .inner > .comment-bottom .comment-vote-options .view-count .icon { opacity: 0.7; }.comment > .inner > .comment-bottom .comment-toolbar-reply { position: absolute; right: 0; top: -4px; }.comment > .inner > .comment-bottom .comment-reply-start { border: none; background: none; font-weight: 600; }.comment > .inner > .comment-bottom .comment-reply-start i { position: relative; top: -2px; pointer-events: none; }.comment > .inner > .comment-bottom .comment-vote-auth { width: 100%; max-width: 400px }.comment > .inner > .comment-bottom .comment-vote-auth .fast-comments-waiting { float: left }.comment > .inner > .comment-bottom .comment-vote-auth .buttons { text-align: right }.comment > .inner > .comment-bottom .comment-vote-auth button { margin: 5px 0 0 5px; padding: 10px 35px; background: #333; color: #fff; border: none; }.comment > .inner > .comment-bottom .comment-vote-auth .sso-login { cursor: pointer; text-decoration: underline; }.comment > .inner > .comment-bottom .reply-form-wrapper { padding: 5px }.comment > .toggle-replies { margin: 0 0 0 15px; line-height: 24px; font-weight: 500; font-size: 11px; color: #666; cursor: pointer; user-select: none; }.children .comment > .toggle-replies { margin-left: 41px; }@media(max-width: 500px) { .children .comment > .toggle-replies { margin-left: 12px; } }.comment > .toggle-replies > * { vertical-align: middle; pointer-events: none; }.comment > .toggle-replies > i { margin-right: 5px; }.comment > .toggle-replies > span > .count { color: #1f1f1f; }.comment > .toggle-replies > span > .count:before { content: "("; }.comment > .toggle-replies > span > .count:after { content: ")"; }.comment .prompt { position: absolute; top: -2px; left: 0; width: 100%; height: 100%; padding: 10px; box-sizing: border-box; background: rgba(255, 255, 255, 0.9); text-align: center }.comment .prompt p { font-weight: 500; }.comment .prompt button { user-select: none; }.comment .prompt button:not(:last-child) { margin-right: 10px }.comment .comment-error p:before { padding-right: 5px; content: "❗" }@media(max-width: 500px) { .comment .prompt { padding: 5px } }@media(max-width: 500px) { .comment .prompt p { margin: 0 0 .4em 0 } }.comment > .inner > .requires-verification-approval, .comment > .inner > .awaiting-approval-notice { margin: 15px 0; }.comment .top-right { position: absolute; top: 0; right: 0; z-index: 2; }.comment .top-right:hover { z-index: 9001; }.comment .jump-link { padding-right: 5px; vertical-align: baseline; font-size: 12px; text-decoration: none; color: #4f4f4f }.comment .jump-link .abs-date { margin-left: 5px; }@media(max-width: 500px) { .comment > .inner > .top-right { top: -10px; } }.comment .top-right > * { display: inline-block; vertical-align: middle }.comment > .inner > .replied { display: inline-block; margin: -7px 5px 0 0; vertical-align: top; }.hide-avatars .comment > .inner > .replied { margin: 0 5px 0 0; }.children > .comment:not(:first-child) > .replied { opacity: 0.5; }.comment .menu { position: relative; padding: 10px 10px 10px 0; user-select: none }.comment .menu .menu-btn { cursor: pointer }.comment .menu .menu-btn i { display: inline-block; width: 4px; height: 4px; margin: 2px; background: #333; border-radius: 10px }.comment .menu.empty .menu-btn { cursor: default; opacity: 0.5; }.menu-content { position: absolute; width: 130px; min-width: max-content; padding: 20px; background-color: #fff; box-shadow: 2px 3px 6px rgba(0, 0, 0, 0.10); border-radius: 10px 0 10px 10px; z-index: 9001; }.menu-content div { padding: 3px; font-weight: 700; cursor: pointer; font-size: 13px }.menu-content div > * { vertical-align: middle; pointer-events: none; }.menu-content div > i { margin: 0 5px 0 0; }.menu-content div > span { display: inline-block; width: calc(100% - 29px); padding: 7px 10px; box-sizing: border-box; }.menu-content div:not(:last-child) > span { border-bottom: 1px solid #dcdcdc; }.menu-content.corner-bottom-right { border-radius: 10px 10px 0 10px; }@media(max-width: 500px) { .comment .menu { padding: 10px 5px 10px 0; } }.comment > .children { margin: 15px 0 0 15px }.footer { height: 65px; margin-top: 25px; padding-top: 20px; text-align: center; font-size: 12px; } .footer:not(.empty) { border-top: 1px solid #ccc } .footer a, .footer .logo { vertical-align: top; text-decoration: none; color: #201600; font-weight: bold; font-size: 14px } .footer .logo { margin-top: -2px; padding-right: 2px; } .comment.readonly .comment-vote-options { display: none }.search-list { position: absolute; z-index: 4; width: 100%; margin-top: -9px; box-sizing: border-box; border-radius: 0 0 11px 11px; background: #fff; border: 1px solid #bfbfbf; }.search-list .cross { position: absolute; top: -11px; right: 0; width: 20px; height: 20px; background-color: #fff; border: 1px solid #bfbfbf; border-right: 0; border-radius: 16px 0 0 16px; cursor: pointer; }.search-list .search-entry { padding: 5px 10px; cursor: pointer; }.search-list .search-entry.last { border-radius: 0 0 11px 11px }.search-list .search-entry img { width: 20px; height: 20px; margin-right: 3px; vertical-align: middle; border-radius: 20px; }.search-list .search-entry > * { pointer-events: none; }.search-list .search-entry:hover, .search-list .search-entry.kb-select, .search-list .cross:hover { background-color: #eee; }.comment-input.search-list-open .reply-button-wrapper { display: none; }.avatar-wrapper .activity-icon { position: absolute; top: 4px; right: 4px; }.activity-icon { width: 8px; height: 8px; border-radius: 10px; }.username .activity-icon { position: relative; top: 2px; display: none; margin-right: 5px; }.activity-icon.online {  display: inline-block; background: lime; box-shadow: inset 0 2px 2px rgba(0, 0, 0, 0.2);  }.hide-avatars .activity-icon.online { top: -1px;  }@media(max-width: 500px) { .activity-icon { width: 5px; height: 5px;  }  }</style>')};